;; gorilla-repl.fileformat = 1

;; **
;;; # Kalman Smoothing
;;; 
;; **

;; @@
(ns kalman
  (:require [gorilla-plot.core :as plot]
            [clojure.core.matrix :as mat
             :refer [matrix identity-matrix mul mmul add sub div shape zero-vector]])
  (:use [anglib
         [state-space :only [LDS]]]
    	[anglican core emit runtime
         [state :only [get-predicts get-log-weight]]]))
(mat/set-current-implementation :vectorz)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-keyword'>:vectorz</span>","value":":vectorz"}
;; <=

;; **
;;; 
;;; ## Generative Model
;;; 
;;; $$
;;; \newcommand{\v}[1]{{\boldsymbol{\mathbf #1}}}
;;; \begin{align}
;;; 	\v{x}\_0
;;;     &\sim
;;;     {\rm Norm}(\v{\mu}\_0, \v{\Sigma}\_0)
;;;     \\\\
;;;     \v{x}\_t
;;;     &=
;;;     \v{A} \cdot \v{x}\_{t-1}
;;; 	+
;;; 	\v{\delta}\_{t-1}
;;; 	&
;;; 	\v{\delta}\_{t-1}
;;;     &\sim
;;; 	{\rm Norm}(\v{0}, \v{Q})
;;;     \\\\
;;;     \v{y}_t
;;;     &=
;;;     \v{C} \cdot \v{x}_t
;;; 	+
;;; 	\v{\epsilon}_t
;;;     &
;;; 	\v{\epsilon}_t
;;;     &\sim
;;; 	{\rm Norm}(\v{0}, \v{R})
;;; \end{align}
;;; $$
;;; 
;;; ## Parameters
;;; 
;;; - @@\v{\mu}_0@@: Mean for initial state
;;; - @@\v{\Sigma}_0@@: Covariance for initial state
;;; - @@\v{A}@@: Transition matrix
;;; - @@\v{Q}@@: Transition covariance
;;; - @@\v{C}@@: Observation matrix
;;; - @@\v{R}@@: Observation covariance
;;; 
;; **

;; **
;;; ## Simulate Data: Periodic motion in 2D latent space
;;; 
;;; 
;;; $$
;;; \begin{align}
;;;     \v{A}
;;;     &=
;;;     \left[
;;;         \begin{array}{cc}
;;;             \cos \omega
;;;             &
;;;             -\sin \omega
;;;             \\\\
;;;             \sin \omega
;;;             &
;;;             \cos \omega
;;;         \end{array}
;;;     \right]
;;;     &
;;;     \v{Q}
;;;     &=
;;;     q
;;;     \v{I}\_2
;;;     &
;;; 	\v{C}\_{1,2}
;;;     &\sim
;;;     {\rm Dirichlet}(1, \ldots, 1)
;;; 	&
;;; 	\v{R}
;;;     &=
;;;     r
;;;     \v{I}\_D
;;; \end{align}
;;; $$
;;; 
;;; 
;; **

;; @@
(defn rotation-matrix
  "A 2D rotation matrix"
  [omega]
  (mat/matrix [[(cos omega) (sin (- omega))]
   			   [(sin omega) (cos omega)]]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;kalman/rotation-matrix</span>","value":"#'kalman/rotation-matrix"}
;; <=

;; @@
;; number of time points
(def +T+ 100)
;; dimension of observation space
(def +D+ 20)
;; dimension of latent space
(def +K+ 2)

;; parameters
(def +init-state+ [0. 1.])
(def +omega+ (/ (* 4.0 Math/PI) +T+))
(def +trans-matrix+ (rotation-matrix +omega+))
(def +q+ 0.01)
(def +trans-cov+ (mat/mul +q+ (mat/identity-matrix +K+)))
(def +obs-matrix+ (mat/transpose (mat/matrix (repeatedly 2 #(sample (dirichlet (repeat +D+ 0.1)))))))
(def +r+ 0.01)
(def +obs-cov+ (mat/mul +r+ (mat/identity-matrix +D+)))
(def +init-mean+ +init-state+)
(def +init-cov+ +trans-cov+)
(def +parameters+ [+init-mean+ +init-cov+
                   +obs-matrix+ +obs-cov+
                   +trans-matrix+ +trans-cov+])

 ;; sample state sequence and observations
(def +states+
  (let [trans-dist (mvn (zero-vector +K+) +trans-cov+)]
    (reduce (fn [states _]
              (conj states
                    (mat/add (mmul +trans-matrix+ (peek states))
                             (sample trans-dist))))
            [+init-state+]
            (range 1 +T+))))

(def +observations+
   (let [obs-dist (mvn (zero-vector +D+) +obs-cov+)]
     (map (fn [state]
            (mat/add (mmul +obs-matrix+ state)
                     (sample obs-dist)))
          +states+)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;kalman/+observations+</span>","value":"#'kalman/+observations+"}
;; <=

;; @@
;; plot latent states
(plot/list-plot (map #(into [] %) +states+) 
                :joined true
                :plot-range [[-2 2] [-2 2]])

;; plot observations
(plot/compose
	(plot/list-plot (mat/slice +observations+ 1 0)
                    :joined true :color "#48b"
                    :plot-range [:all [-1 1]])
    (plot/list-plot (mat/slice +observations+ 1 1)
                    :joined true :color "#b48")
    (plot/list-plot (mat/slice +observations+ 1 2)
                    :joined true :color "#4b8")
    (plot/list-plot (mat/slice +observations+ 1 3)
                    :joined true :color "#b84"))

;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"ac749b69-1325-4327-b7b2-5595879d932c","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":[-1,1]}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"ac749b69-1325-4327-b7b2-5595879d932c","values":[{"x":0,"y":-0.07493349200638817},{"x":1,"y":0.08876358822967113},{"x":2,"y":0.041834406698319886},{"x":3,"y":0.02710946540628397},{"x":4,"y":0.054545966919572406},{"x":5,"y":-0.22208547542759555},{"x":6,"y":0.12203671904306408},{"x":7,"y":0.03901391872372339},{"x":8,"y":0.0656193768809446},{"x":9,"y":-0.03676627186704174},{"x":10,"y":0.05633465357061906},{"x":11,"y":0.02531663494045071},{"x":12,"y":-0.06559062133774426},{"x":13,"y":0.07874517330135684},{"x":14,"y":0.11821835160172092},{"x":15,"y":-0.015646004901078432},{"x":16,"y":0.04249279864063763},{"x":17,"y":0.016608839165589535},{"x":18,"y":0.009937083016819592},{"x":19,"y":-0.1334382635435901},{"x":20,"y":0.07958343603915304},{"x":21,"y":0.16847772913503414},{"x":22,"y":-0.05337337699686139},{"x":23,"y":-0.07823365664998237},{"x":24,"y":0.06289643574428007},{"x":25,"y":0.10631305365966849},{"x":26,"y":0.005485586432576654},{"x":27,"y":-0.012338638632915967},{"x":28,"y":-0.09222257964281409},{"x":29,"y":-0.016517270353608223},{"x":30,"y":-0.07241936267929398},{"x":31,"y":-0.117725534948691},{"x":32,"y":-0.1870035876650982},{"x":33,"y":0.10934632274883777},{"x":34,"y":-0.16035026118146595},{"x":35,"y":-0.16467750164235218},{"x":36,"y":0.04086672181182461},{"x":37,"y":0.19485571080149441},{"x":38,"y":-0.023108768536487953},{"x":39,"y":-0.02369009768088211},{"x":40,"y":-0.08668164503670854},{"x":41,"y":0.15671173497462582},{"x":42,"y":0.21243683240358416},{"x":43,"y":0.11144303604001593},{"x":44,"y":0.05298948333597621},{"x":45,"y":-0.007806685220982666},{"x":46,"y":0.10616594579913091},{"x":47,"y":0.06050126008280254},{"x":48,"y":-0.1605985217132487},{"x":49,"y":0.11601936720734556},{"x":50,"y":0.0867235578447107},{"x":51,"y":0.13316814555149578},{"x":52,"y":-0.015769344326548734},{"x":53,"y":-0.17724578692659718},{"x":54,"y":-0.1520687570937324},{"x":55,"y":-0.06472921622523437},{"x":56,"y":-0.07687209866783076},{"x":57,"y":0.07033379121543434},{"x":58,"y":0.09204705906896007},{"x":59,"y":-0.10480317905618435},{"x":60,"y":0.02590846762190474},{"x":61,"y":-0.01548936551498323},{"x":62,"y":-0.15212326110555222},{"x":63,"y":0.016302377037752468},{"x":64,"y":-0.038716683210791324},{"x":65,"y":0.11750137680246596},{"x":66,"y":0.023242367732914947},{"x":67,"y":-0.004632816768478028},{"x":68,"y":0.03325484940396789},{"x":69,"y":0.10037965026684742},{"x":70,"y":0.040784090237868297},{"x":71,"y":-0.05677854558996927},{"x":72,"y":-0.07780113078683072},{"x":73,"y":-0.02558661997448339},{"x":74,"y":-0.03892995686272311},{"x":75,"y":0.01392299664177368},{"x":76,"y":-0.10532470201484202},{"x":77,"y":0.0269209424269835},{"x":78,"y":-0.03449687147548976},{"x":79,"y":-0.14732471508320688},{"x":80,"y":-0.06530976761626789},{"x":81,"y":0.03171348444927156},{"x":82,"y":-0.034928560467663725},{"x":83,"y":-0.024381185483770468},{"x":84,"y":0.0861940857014336},{"x":85,"y":-0.0931114126449696},{"x":86,"y":0.23753023959096833},{"x":87,"y":-0.2659669801679272},{"x":88,"y":0.06988770830486617},{"x":89,"y":0.019719081198719565},{"x":90,"y":-0.020219257381812312},{"x":91,"y":-0.14541708896051891},{"x":92,"y":0.06291970442421876},{"x":93,"y":0.05732028682838756},{"x":94,"y":-0.2356496148205715},{"x":95,"y":-0.04192014941980732},{"x":96,"y":0.030456013051785004},{"x":97,"y":0.0736539879869224},{"x":98,"y":-0.11607885980479278},{"x":99,"y":0.04119848551355731}]},{"name":"db5ec62f-0631-4f8f-b664-36a414d85512","values":[{"x":0,"y":0.218942923138959},{"x":1,"y":0.0036648678875646837},{"x":2,"y":0.030015705649361256},{"x":3,"y":0.012507707969085576},{"x":4,"y":-0.03721565685357271},{"x":5,"y":0.04887327035910606},{"x":6,"y":-0.18664772641383653},{"x":7,"y":-0.02037051802569899},{"x":8,"y":-0.008044062908254726},{"x":9,"y":0.013050584602254008},{"x":10,"y":0.11110129126839022},{"x":11,"y":-0.09666550568223144},{"x":12,"y":-0.09563038521720317},{"x":13,"y":0.02905038526455607},{"x":14,"y":-0.033382351588148805},{"x":15,"y":-0.32061664324039385},{"x":16,"y":-0.02982183119414808},{"x":17,"y":0.06715433700359984},{"x":18,"y":-0.12340152072295549},{"x":19,"y":0.002042961423262664},{"x":20,"y":0.05782976509659483},{"x":21,"y":0.07064652233036495},{"x":22,"y":-0.0858899062506911},{"x":23,"y":0.10140337957756462},{"x":24,"y":-0.1731911382310188},{"x":25,"y":-0.16965399216999555},{"x":26,"y":0.03565322547831373},{"x":27,"y":-0.04901498973433731},{"x":28,"y":-0.263775792495536},{"x":29,"y":0.0030139620229941468},{"x":30,"y":-0.13577431295249093},{"x":31,"y":0.010426741028974802},{"x":32,"y":-0.09416047360539168},{"x":33,"y":-0.10175301133296769},{"x":34,"y":0.07250292801710262},{"x":35,"y":-0.018537108438995267},{"x":36,"y":0.20844561760427002},{"x":37,"y":-0.04301071719354683},{"x":38,"y":0.17241531168632532},{"x":39,"y":-0.12121866141611705},{"x":40,"y":-0.028331932595646002},{"x":41,"y":0.04589884995848499},{"x":42,"y":0.04714479343936563},{"x":43,"y":-0.07131159366166527},{"x":44,"y":-0.17677966419484253},{"x":45,"y":0.1749974738589971},{"x":46,"y":-0.0542822711768714},{"x":47,"y":-0.09624738700637281},{"x":48,"y":-0.05370880985353798},{"x":49,"y":0.09916691900309137},{"x":50,"y":0.07633993196790255},{"x":51,"y":0.030670188115727984},{"x":52,"y":0.02251928679733445},{"x":53,"y":0.010381975684071251},{"x":54,"y":-0.1604988083923378},{"x":55,"y":0.13511940310877366},{"x":56,"y":0.07532045574143009},{"x":57,"y":0.046047616867303284},{"x":58,"y":0.0989304178170371},{"x":59,"y":0.006142850887421735},{"x":60,"y":-0.03693057167980795},{"x":61,"y":-0.001140197466078692},{"x":62,"y":-0.027751205749080868},{"x":63,"y":-0.21205522122473358},{"x":64,"y":0.1502363228087416},{"x":65,"y":0.01668918619452142},{"x":66,"y":-0.11969982330747411},{"x":67,"y":-0.2556275881643033},{"x":68,"y":-0.06995249011851774},{"x":69,"y":-0.12317527397237142},{"x":70,"y":0.014615417168147023},{"x":71,"y":-0.119020592851819},{"x":72,"y":0.08341472917262047},{"x":73,"y":-0.1544368673525846},{"x":74,"y":0.006486965070353151},{"x":75,"y":-0.08942434598463478},{"x":76,"y":0.1071402469623524},{"x":77,"y":0.001515595566289031},{"x":78,"y":0.03141735089440135},{"x":79,"y":0.03495663172476354},{"x":80,"y":0.06319552900194414},{"x":81,"y":0.11499947024459269},{"x":82,"y":0.02496712187407666},{"x":83,"y":-0.15668993626166047},{"x":84,"y":6.23578501411412E-4},{"x":85,"y":0.02477451200999095},{"x":86,"y":-0.02714126844979442},{"x":87,"y":0.04548694733647772},{"x":88,"y":-0.18603810290134},{"x":89,"y":6.460444691024532E-4},{"x":90,"y":-0.0038336726923107155},{"x":91,"y":0.0018407362159227475},{"x":92,"y":-4.99978506249131E-4},{"x":93,"y":0.2555349893277829},{"x":94,"y":0.1475776763182708},{"x":95,"y":0.06239431978472425},{"x":96,"y":0.15362793976083158},{"x":97,"y":-0.035666434141708905},{"x":98,"y":0.31967312941228404},{"x":99,"y":-0.16048595468509883}]},{"name":"e4ece22a-d079-4752-bc82-83588049fa02","values":[{"x":0,"y":0.229017163774034},{"x":1,"y":0.018162571453752968},{"x":2,"y":0.26037797062108825},{"x":3,"y":0.2164184119719225},{"x":4,"y":0.13461577921568094},{"x":5,"y":0.22683638919821061},{"x":6,"y":0.0055807933823070754},{"x":7,"y":0.15317063091698235},{"x":8,"y":0.21378096612455155},{"x":9,"y":0.01386473320531291},{"x":10,"y":0.19238980128471928},{"x":11,"y":-0.03935419147984172},{"x":12,"y":-0.041263503145370126},{"x":13,"y":-0.09405704871486469},{"x":14,"y":0.01585558225816082},{"x":15,"y":0.013944785632603849},{"x":16,"y":-0.07864512127941004},{"x":17,"y":0.04992734290618856},{"x":18,"y":0.15098271633940458},{"x":19,"y":-0.03957545776117774},{"x":20,"y":-0.1825536655977486},{"x":21,"y":-0.10630349757881655},{"x":22,"y":-0.0320613274483559},{"x":23,"y":-0.2513232749798916},{"x":24,"y":0.06948695747627381},{"x":25,"y":-0.24451549024914523},{"x":26,"y":0.014400253883776859},{"x":27,"y":-0.28643718987501937},{"x":28,"y":-0.2420360090590806},{"x":29,"y":-0.12296747621661033},{"x":30,"y":-0.2841149686360588},{"x":31,"y":-0.0956025178456752},{"x":32,"y":-0.1369914930105519},{"x":33,"y":-0.009773146501436},{"x":34,"y":-0.07969474597086823},{"x":35,"y":-0.1667843832329351},{"x":36,"y":-0.170305144328723},{"x":37,"y":-0.10091827226678735},{"x":38,"y":-0.03987987831692709},{"x":39,"y":-0.01647352365895577},{"x":40,"y":0.1932697841551873},{"x":41,"y":0.044528745703901376},{"x":42,"y":0.1017980168253653},{"x":43,"y":-0.008125051847551634},{"x":44,"y":0.06399602401806237},{"x":45,"y":0.19543501140686648},{"x":46,"y":0.15156996910298498},{"x":47,"y":0.012366153566125221},{"x":48,"y":-0.1368878736813962},{"x":49,"y":0.10061134019760454},{"x":50,"y":0.027755474884203726},{"x":51,"y":-0.027999146809580044},{"x":52,"y":0.0052778589485188016},{"x":53,"y":-0.017868736299889332},{"x":54,"y":0.011172933948611227},{"x":55,"y":0.09047314144394819},{"x":56,"y":0.09245263210779764},{"x":57,"y":0.11730175189053059},{"x":58,"y":0.07889681484169599},{"x":59,"y":0.11735363916188271},{"x":60,"y":0.095558077331443},{"x":61,"y":0.1325577640563075},{"x":62,"y":-0.19093891105150843},{"x":63,"y":0.0833749131676493},{"x":64,"y":-0.22252376600996826},{"x":65,"y":-0.0489426272601509},{"x":66,"y":0.0495874318106404},{"x":67,"y":0.12267454890494468},{"x":68,"y":-0.16158442751048205},{"x":69,"y":-0.03904056071694417},{"x":70,"y":0.19360808896649312},{"x":71,"y":0.015099589638984695},{"x":72,"y":-0.06633828979120553},{"x":73,"y":-0.1345028157395684},{"x":74,"y":0.11883985908350561},{"x":75,"y":-0.05391711779442074},{"x":76,"y":-0.2396568896714248},{"x":77,"y":-0.1622636648846571},{"x":78,"y":-0.09457658336776578},{"x":79,"y":-0.1541507943559328},{"x":80,"y":-0.30696799869732394},{"x":81,"y":-0.1924394726823601},{"x":82,"y":-0.210290979723057},{"x":83,"y":-0.10490525430997431},{"x":84,"y":-0.161013641687066},{"x":85,"y":-0.2040986703970722},{"x":86,"y":-0.11167030462974685},{"x":87,"y":-0.2760186167036225},{"x":88,"y":-0.13233996443931523},{"x":89,"y":-0.27714505488732943},{"x":90,"y":-0.03635724949786973},{"x":91,"y":0.008593417724587556},{"x":92,"y":-0.11156262686883857},{"x":93,"y":0.2089718918899586},{"x":94,"y":0.13226314544014517},{"x":95,"y":0.1530051494102915},{"x":96,"y":0.10767125429177304},{"x":97,"y":0.12357301969535138},{"x":98,"y":0.09293370449692911},{"x":99,"y":0.1857001108304212}]},{"name":"8b95f6ef-7d7a-435c-be0e-82e088a7f91a","values":[{"x":0,"y":0.15877393444090496},{"x":1,"y":0.15771831100892178},{"x":2,"y":0.032050536320227724},{"x":3,"y":0.05181026585371576},{"x":4,"y":0.037807698958493806},{"x":5,"y":-0.04865691159030333},{"x":6,"y":0.007380407283083686},{"x":7,"y":0.039029483807461476},{"x":8,"y":0.08154345896178311},{"x":9,"y":0.0010151519637594617},{"x":10,"y":0.061125952173793865},{"x":11,"y":0.015380475862375353},{"x":12,"y":0.020914337851448826},{"x":13,"y":-0.07716502429186499},{"x":14,"y":-0.09285178251640738},{"x":15,"y":0.01854367245071151},{"x":16,"y":0.2039647604368647},{"x":17,"y":0.02078129893487969},{"x":18,"y":-0.05394140017895359},{"x":19,"y":-0.0017468733811842503},{"x":20,"y":-0.06930957574361928},{"x":21,"y":-0.10864108197530789},{"x":22,"y":0.00794656360898333},{"x":23,"y":0.042334584840775305},{"x":24,"y":-0.12230439774091935},{"x":25,"y":-0.10309279545851652},{"x":26,"y":-0.07554244381624355},{"x":27,"y":-0.07457392229623594},{"x":28,"y":0.025104624259898345},{"x":29,"y":0.10478329443188461},{"x":30,"y":0.2325073404376049},{"x":31,"y":0.09676801504328911},{"x":32,"y":-0.06306650031510344},{"x":33,"y":-0.09710873466621749},{"x":34,"y":-0.17667704283438887},{"x":35,"y":0.020904501172774825},{"x":36,"y":0.04237672253414754},{"x":37,"y":-0.09078422659722932},{"x":38,"y":-0.03807336598554792},{"x":39,"y":-0.002058604799116296},{"x":40,"y":0.08060616112193777},{"x":41,"y":-0.0627005105827026},{"x":42,"y":0.1258806050341958},{"x":43,"y":-0.03987713828070977},{"x":44,"y":0.017130033590481663},{"x":45,"y":-0.004504821935478036},{"x":46,"y":0.07556774779583343},{"x":47,"y":-0.004397219994575189},{"x":48,"y":0.12883199762935882},{"x":49,"y":-0.03288133203981084},{"x":50,"y":-0.11307586078431861},{"x":51,"y":0.2768208743096524},{"x":52,"y":-0.10419909122447786},{"x":53,"y":-0.08096565076338402},{"x":54,"y":0.04199667749791454},{"x":55,"y":0.02093543750336185},{"x":56,"y":0.03130573389643462},{"x":57,"y":-0.09741100748623455},{"x":58,"y":-0.07449307903438374},{"x":59,"y":0.08096367528149741},{"x":60,"y":0.022744343648336208},{"x":61,"y":-0.059062412388664075},{"x":62,"y":-0.22548068306690172},{"x":63,"y":-0.0944917742829652},{"x":64,"y":0.0935028845025121},{"x":65,"y":-0.03168338177617202},{"x":66,"y":-1.2545679965316955E-4},{"x":67,"y":-0.02312861591214876},{"x":68,"y":-0.08926854758345454},{"x":69,"y":-0.26329599807484344},{"x":70,"y":-0.0463612359703938},{"x":71,"y":-0.06623034654851156},{"x":72,"y":-0.04744583378078427},{"x":73,"y":0.027798977707554805},{"x":74,"y":0.007819620946375339},{"x":75,"y":-0.04741184356722754},{"x":76,"y":-0.14695626334864034},{"x":77,"y":-0.16203365585184437},{"x":78,"y":-0.0014141766201401056},{"x":79,"y":0.024804595357334924},{"x":80,"y":0.006900084717318886},{"x":81,"y":0.07201406585649614},{"x":82,"y":-0.007434434812428321},{"x":83,"y":-0.1385245677589354},{"x":84,"y":-0.06927212469949093},{"x":85,"y":-0.005472451584531196},{"x":86,"y":-0.001417670820260308},{"x":87,"y":-0.06737827512226302},{"x":88,"y":-0.17314474311602804},{"x":89,"y":-0.07268517575421761},{"x":90,"y":-0.07522029461621103},{"x":91,"y":-0.15599617290708606},{"x":92,"y":0.021543276264701993},{"x":93,"y":-0.02721285800324817},{"x":94,"y":-0.03124030345521916},{"x":95,"y":-0.06951860075551437},{"x":96,"y":0.11954183771176555},{"x":97,"y":-0.1490626290383461},{"x":98,"y":0.04997715501586464},{"x":99,"y":0.11636920668714554}]}],"marks":[{"type":"line","from":{"data":"ac749b69-1325-4327-b7b2-5595879d932c"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#48b"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"db5ec62f-0631-4f8f-b664-36a414d85512"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#b48"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"e4ece22a-d079-4752-bc82-83588049fa02"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#4b8"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"8b95f6ef-7d7a-435c-be0e-82e088a7f91a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#b84"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"ac749b69-1325-4327-b7b2-5595879d932c\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [-1 1]}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"ac749b69-1325-4327-b7b2-5595879d932c\", :values ({:x 0, :y -0.07493349200638817} {:x 1, :y 0.08876358822967113} {:x 2, :y 0.041834406698319886} {:x 3, :y 0.02710946540628397} {:x 4, :y 0.054545966919572406} {:x 5, :y -0.22208547542759555} {:x 6, :y 0.12203671904306408} {:x 7, :y 0.03901391872372339} {:x 8, :y 0.0656193768809446} {:x 9, :y -0.03676627186704174} {:x 10, :y 0.05633465357061906} {:x 11, :y 0.02531663494045071} {:x 12, :y -0.06559062133774426} {:x 13, :y 0.07874517330135684} {:x 14, :y 0.11821835160172092} {:x 15, :y -0.015646004901078432} {:x 16, :y 0.04249279864063763} {:x 17, :y 0.016608839165589535} {:x 18, :y 0.009937083016819592} {:x 19, :y -0.1334382635435901} {:x 20, :y 0.07958343603915304} {:x 21, :y 0.16847772913503414} {:x 22, :y -0.05337337699686139} {:x 23, :y -0.07823365664998237} {:x 24, :y 0.06289643574428007} {:x 25, :y 0.10631305365966849} {:x 26, :y 0.005485586432576654} {:x 27, :y -0.012338638632915967} {:x 28, :y -0.09222257964281409} {:x 29, :y -0.016517270353608223} {:x 30, :y -0.07241936267929398} {:x 31, :y -0.117725534948691} {:x 32, :y -0.1870035876650982} {:x 33, :y 0.10934632274883777} {:x 34, :y -0.16035026118146595} {:x 35, :y -0.16467750164235218} {:x 36, :y 0.04086672181182461} {:x 37, :y 0.19485571080149441} {:x 38, :y -0.023108768536487953} {:x 39, :y -0.02369009768088211} {:x 40, :y -0.08668164503670854} {:x 41, :y 0.15671173497462582} {:x 42, :y 0.21243683240358416} {:x 43, :y 0.11144303604001593} {:x 44, :y 0.05298948333597621} {:x 45, :y -0.007806685220982666} {:x 46, :y 0.10616594579913091} {:x 47, :y 0.06050126008280254} {:x 48, :y -0.1605985217132487} {:x 49, :y 0.11601936720734556} {:x 50, :y 0.0867235578447107} {:x 51, :y 0.13316814555149578} {:x 52, :y -0.015769344326548734} {:x 53, :y -0.17724578692659718} {:x 54, :y -0.1520687570937324} {:x 55, :y -0.06472921622523437} {:x 56, :y -0.07687209866783076} {:x 57, :y 0.07033379121543434} {:x 58, :y 0.09204705906896007} {:x 59, :y -0.10480317905618435} {:x 60, :y 0.02590846762190474} {:x 61, :y -0.01548936551498323} {:x 62, :y -0.15212326110555222} {:x 63, :y 0.016302377037752468} {:x 64, :y -0.038716683210791324} {:x 65, :y 0.11750137680246596} {:x 66, :y 0.023242367732914947} {:x 67, :y -0.004632816768478028} {:x 68, :y 0.03325484940396789} {:x 69, :y 0.10037965026684742} {:x 70, :y 0.040784090237868297} {:x 71, :y -0.05677854558996927} {:x 72, :y -0.07780113078683072} {:x 73, :y -0.02558661997448339} {:x 74, :y -0.03892995686272311} {:x 75, :y 0.01392299664177368} {:x 76, :y -0.10532470201484202} {:x 77, :y 0.0269209424269835} {:x 78, :y -0.03449687147548976} {:x 79, :y -0.14732471508320688} {:x 80, :y -0.06530976761626789} {:x 81, :y 0.03171348444927156} {:x 82, :y -0.034928560467663725} {:x 83, :y -0.024381185483770468} {:x 84, :y 0.0861940857014336} {:x 85, :y -0.0931114126449696} {:x 86, :y 0.23753023959096833} {:x 87, :y -0.2659669801679272} {:x 88, :y 0.06988770830486617} {:x 89, :y 0.019719081198719565} {:x 90, :y -0.020219257381812312} {:x 91, :y -0.14541708896051891} {:x 92, :y 0.06291970442421876} {:x 93, :y 0.05732028682838756} {:x 94, :y -0.2356496148205715} {:x 95, :y -0.04192014941980732} {:x 96, :y 0.030456013051785004} {:x 97, :y 0.0736539879869224} {:x 98, :y -0.11607885980479278} {:x 99, :y 0.04119848551355731})} {:name \"db5ec62f-0631-4f8f-b664-36a414d85512\", :values ({:x 0, :y 0.218942923138959} {:x 1, :y 0.0036648678875646837} {:x 2, :y 0.030015705649361256} {:x 3, :y 0.012507707969085576} {:x 4, :y -0.03721565685357271} {:x 5, :y 0.04887327035910606} {:x 6, :y -0.18664772641383653} {:x 7, :y -0.02037051802569899} {:x 8, :y -0.008044062908254726} {:x 9, :y 0.013050584602254008} {:x 10, :y 0.11110129126839022} {:x 11, :y -0.09666550568223144} {:x 12, :y -0.09563038521720317} {:x 13, :y 0.02905038526455607} {:x 14, :y -0.033382351588148805} {:x 15, :y -0.32061664324039385} {:x 16, :y -0.02982183119414808} {:x 17, :y 0.06715433700359984} {:x 18, :y -0.12340152072295549} {:x 19, :y 0.002042961423262664} {:x 20, :y 0.05782976509659483} {:x 21, :y 0.07064652233036495} {:x 22, :y -0.0858899062506911} {:x 23, :y 0.10140337957756462} {:x 24, :y -0.1731911382310188} {:x 25, :y -0.16965399216999555} {:x 26, :y 0.03565322547831373} {:x 27, :y -0.04901498973433731} {:x 28, :y -0.263775792495536} {:x 29, :y 0.0030139620229941468} {:x 30, :y -0.13577431295249093} {:x 31, :y 0.010426741028974802} {:x 32, :y -0.09416047360539168} {:x 33, :y -0.10175301133296769} {:x 34, :y 0.07250292801710262} {:x 35, :y -0.018537108438995267} {:x 36, :y 0.20844561760427002} {:x 37, :y -0.04301071719354683} {:x 38, :y 0.17241531168632532} {:x 39, :y -0.12121866141611705} {:x 40, :y -0.028331932595646002} {:x 41, :y 0.04589884995848499} {:x 42, :y 0.04714479343936563} {:x 43, :y -0.07131159366166527} {:x 44, :y -0.17677966419484253} {:x 45, :y 0.1749974738589971} {:x 46, :y -0.0542822711768714} {:x 47, :y -0.09624738700637281} {:x 48, :y -0.05370880985353798} {:x 49, :y 0.09916691900309137} {:x 50, :y 0.07633993196790255} {:x 51, :y 0.030670188115727984} {:x 52, :y 0.02251928679733445} {:x 53, :y 0.010381975684071251} {:x 54, :y -0.1604988083923378} {:x 55, :y 0.13511940310877366} {:x 56, :y 0.07532045574143009} {:x 57, :y 0.046047616867303284} {:x 58, :y 0.0989304178170371} {:x 59, :y 0.006142850887421735} {:x 60, :y -0.03693057167980795} {:x 61, :y -0.001140197466078692} {:x 62, :y -0.027751205749080868} {:x 63, :y -0.21205522122473358} {:x 64, :y 0.1502363228087416} {:x 65, :y 0.01668918619452142} {:x 66, :y -0.11969982330747411} {:x 67, :y -0.2556275881643033} {:x 68, :y -0.06995249011851774} {:x 69, :y -0.12317527397237142} {:x 70, :y 0.014615417168147023} {:x 71, :y -0.119020592851819} {:x 72, :y 0.08341472917262047} {:x 73, :y -0.1544368673525846} {:x 74, :y 0.006486965070353151} {:x 75, :y -0.08942434598463478} {:x 76, :y 0.1071402469623524} {:x 77, :y 0.001515595566289031} {:x 78, :y 0.03141735089440135} {:x 79, :y 0.03495663172476354} {:x 80, :y 0.06319552900194414} {:x 81, :y 0.11499947024459269} {:x 82, :y 0.02496712187407666} {:x 83, :y -0.15668993626166047} {:x 84, :y 6.23578501411412E-4} {:x 85, :y 0.02477451200999095} {:x 86, :y -0.02714126844979442} {:x 87, :y 0.04548694733647772} {:x 88, :y -0.18603810290134} {:x 89, :y 6.460444691024532E-4} {:x 90, :y -0.0038336726923107155} {:x 91, :y 0.0018407362159227475} {:x 92, :y -4.99978506249131E-4} {:x 93, :y 0.2555349893277829} {:x 94, :y 0.1475776763182708} {:x 95, :y 0.06239431978472425} {:x 96, :y 0.15362793976083158} {:x 97, :y -0.035666434141708905} {:x 98, :y 0.31967312941228404} {:x 99, :y -0.16048595468509883})} {:name \"e4ece22a-d079-4752-bc82-83588049fa02\", :values ({:x 0, :y 0.229017163774034} {:x 1, :y 0.018162571453752968} {:x 2, :y 0.26037797062108825} {:x 3, :y 0.2164184119719225} {:x 4, :y 0.13461577921568094} {:x 5, :y 0.22683638919821061} {:x 6, :y 0.0055807933823070754} {:x 7, :y 0.15317063091698235} {:x 8, :y 0.21378096612455155} {:x 9, :y 0.01386473320531291} {:x 10, :y 0.19238980128471928} {:x 11, :y -0.03935419147984172} {:x 12, :y -0.041263503145370126} {:x 13, :y -0.09405704871486469} {:x 14, :y 0.01585558225816082} {:x 15, :y 0.013944785632603849} {:x 16, :y -0.07864512127941004} {:x 17, :y 0.04992734290618856} {:x 18, :y 0.15098271633940458} {:x 19, :y -0.03957545776117774} {:x 20, :y -0.1825536655977486} {:x 21, :y -0.10630349757881655} {:x 22, :y -0.0320613274483559} {:x 23, :y -0.2513232749798916} {:x 24, :y 0.06948695747627381} {:x 25, :y -0.24451549024914523} {:x 26, :y 0.014400253883776859} {:x 27, :y -0.28643718987501937} {:x 28, :y -0.2420360090590806} {:x 29, :y -0.12296747621661033} {:x 30, :y -0.2841149686360588} {:x 31, :y -0.0956025178456752} {:x 32, :y -0.1369914930105519} {:x 33, :y -0.009773146501436} {:x 34, :y -0.07969474597086823} {:x 35, :y -0.1667843832329351} {:x 36, :y -0.170305144328723} {:x 37, :y -0.10091827226678735} {:x 38, :y -0.03987987831692709} {:x 39, :y -0.01647352365895577} {:x 40, :y 0.1932697841551873} {:x 41, :y 0.044528745703901376} {:x 42, :y 0.1017980168253653} {:x 43, :y -0.008125051847551634} {:x 44, :y 0.06399602401806237} {:x 45, :y 0.19543501140686648} {:x 46, :y 0.15156996910298498} {:x 47, :y 0.012366153566125221} {:x 48, :y -0.1368878736813962} {:x 49, :y 0.10061134019760454} {:x 50, :y 0.027755474884203726} {:x 51, :y -0.027999146809580044} {:x 52, :y 0.0052778589485188016} {:x 53, :y -0.017868736299889332} {:x 54, :y 0.011172933948611227} {:x 55, :y 0.09047314144394819} {:x 56, :y 0.09245263210779764} {:x 57, :y 0.11730175189053059} {:x 58, :y 0.07889681484169599} {:x 59, :y 0.11735363916188271} {:x 60, :y 0.095558077331443} {:x 61, :y 0.1325577640563075} {:x 62, :y -0.19093891105150843} {:x 63, :y 0.0833749131676493} {:x 64, :y -0.22252376600996826} {:x 65, :y -0.0489426272601509} {:x 66, :y 0.0495874318106404} {:x 67, :y 0.12267454890494468} {:x 68, :y -0.16158442751048205} {:x 69, :y -0.03904056071694417} {:x 70, :y 0.19360808896649312} {:x 71, :y 0.015099589638984695} {:x 72, :y -0.06633828979120553} {:x 73, :y -0.1345028157395684} {:x 74, :y 0.11883985908350561} {:x 75, :y -0.05391711779442074} {:x 76, :y -0.2396568896714248} {:x 77, :y -0.1622636648846571} {:x 78, :y -0.09457658336776578} {:x 79, :y -0.1541507943559328} {:x 80, :y -0.30696799869732394} {:x 81, :y -0.1924394726823601} {:x 82, :y -0.210290979723057} {:x 83, :y -0.10490525430997431} {:x 84, :y -0.161013641687066} {:x 85, :y -0.2040986703970722} {:x 86, :y -0.11167030462974685} {:x 87, :y -0.2760186167036225} {:x 88, :y -0.13233996443931523} {:x 89, :y -0.27714505488732943} {:x 90, :y -0.03635724949786973} {:x 91, :y 0.008593417724587556} {:x 92, :y -0.11156262686883857} {:x 93, :y 0.2089718918899586} {:x 94, :y 0.13226314544014517} {:x 95, :y 0.1530051494102915} {:x 96, :y 0.10767125429177304} {:x 97, :y 0.12357301969535138} {:x 98, :y 0.09293370449692911} {:x 99, :y 0.1857001108304212})} {:name \"8b95f6ef-7d7a-435c-be0e-82e088a7f91a\", :values ({:x 0, :y 0.15877393444090496} {:x 1, :y 0.15771831100892178} {:x 2, :y 0.032050536320227724} {:x 3, :y 0.05181026585371576} {:x 4, :y 0.037807698958493806} {:x 5, :y -0.04865691159030333} {:x 6, :y 0.007380407283083686} {:x 7, :y 0.039029483807461476} {:x 8, :y 0.08154345896178311} {:x 9, :y 0.0010151519637594617} {:x 10, :y 0.061125952173793865} {:x 11, :y 0.015380475862375353} {:x 12, :y 0.020914337851448826} {:x 13, :y -0.07716502429186499} {:x 14, :y -0.09285178251640738} {:x 15, :y 0.01854367245071151} {:x 16, :y 0.2039647604368647} {:x 17, :y 0.02078129893487969} {:x 18, :y -0.05394140017895359} {:x 19, :y -0.0017468733811842503} {:x 20, :y -0.06930957574361928} {:x 21, :y -0.10864108197530789} {:x 22, :y 0.00794656360898333} {:x 23, :y 0.042334584840775305} {:x 24, :y -0.12230439774091935} {:x 25, :y -0.10309279545851652} {:x 26, :y -0.07554244381624355} {:x 27, :y -0.07457392229623594} {:x 28, :y 0.025104624259898345} {:x 29, :y 0.10478329443188461} {:x 30, :y 0.2325073404376049} {:x 31, :y 0.09676801504328911} {:x 32, :y -0.06306650031510344} {:x 33, :y -0.09710873466621749} {:x 34, :y -0.17667704283438887} {:x 35, :y 0.020904501172774825} {:x 36, :y 0.04237672253414754} {:x 37, :y -0.09078422659722932} {:x 38, :y -0.03807336598554792} {:x 39, :y -0.002058604799116296} {:x 40, :y 0.08060616112193777} {:x 41, :y -0.0627005105827026} {:x 42, :y 0.1258806050341958} {:x 43, :y -0.03987713828070977} {:x 44, :y 0.017130033590481663} {:x 45, :y -0.004504821935478036} {:x 46, :y 0.07556774779583343} {:x 47, :y -0.004397219994575189} {:x 48, :y 0.12883199762935882} {:x 49, :y -0.03288133203981084} {:x 50, :y -0.11307586078431861} {:x 51, :y 0.2768208743096524} {:x 52, :y -0.10419909122447786} {:x 53, :y -0.08096565076338402} {:x 54, :y 0.04199667749791454} {:x 55, :y 0.02093543750336185} {:x 56, :y 0.03130573389643462} {:x 57, :y -0.09741100748623455} {:x 58, :y -0.07449307903438374} {:x 59, :y 0.08096367528149741} {:x 60, :y 0.022744343648336208} {:x 61, :y -0.059062412388664075} {:x 62, :y -0.22548068306690172} {:x 63, :y -0.0944917742829652} {:x 64, :y 0.0935028845025121} {:x 65, :y -0.03168338177617202} {:x 66, :y -1.2545679965316955E-4} {:x 67, :y -0.02312861591214876} {:x 68, :y -0.08926854758345454} {:x 69, :y -0.26329599807484344} {:x 70, :y -0.0463612359703938} {:x 71, :y -0.06623034654851156} {:x 72, :y -0.04744583378078427} {:x 73, :y 0.027798977707554805} {:x 74, :y 0.007819620946375339} {:x 75, :y -0.04741184356722754} {:x 76, :y -0.14695626334864034} {:x 77, :y -0.16203365585184437} {:x 78, :y -0.0014141766201401056} {:x 79, :y 0.024804595357334924} {:x 80, :y 0.006900084717318886} {:x 81, :y 0.07201406585649614} {:x 82, :y -0.007434434812428321} {:x 83, :y -0.1385245677589354} {:x 84, :y -0.06927212469949093} {:x 85, :y -0.005472451584531196} {:x 86, :y -0.001417670820260308} {:x 87, :y -0.06737827512226302} {:x 88, :y -0.17314474311602804} {:x 89, :y -0.07268517575421761} {:x 90, :y -0.07522029461621103} {:x 91, :y -0.15599617290708606} {:x 92, :y 0.021543276264701993} {:x 93, :y -0.02721285800324817} {:x 94, :y -0.03124030345521916} {:x 95, :y -0.06951860075551437} {:x 96, :y 0.11954183771176555} {:x 97, :y -0.1490626290383461} {:x 98, :y 0.04997715501586464} {:x 99, :y 0.11636920668714554})}), :marks ({:type \"line\", :from {:data \"ac749b69-1325-4327-b7b2-5595879d932c\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#48b\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"db5ec62f-0631-4f8f-b664-36a414d85512\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#b48\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"e4ece22a-d079-4752-bc82-83588049fa02\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#4b8\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"8b95f6ef-7d7a-435c-be0e-82e088a7f91a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#b84\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; **
;;; ## Inference of State Sequence
;;; 
;; **

;; @@
(with-primitive-procedures [mmul add sub shape matrix identity-matrix zero-vector]
  (defquery kalman
    "A basic Kalman smoother. Predicts a state sequence from the posterior
    given observations"
    [observations obs-matrix obs-cov trans-matrix trans-cov init-mean init-cov]
    (let [;; D is dimensionality of data,
          ;; K is dimensionality of latent space
          [D K] (shape obs-matrix)
          ;; prior on observation noise
          obs-dist (mvn (zero-vector D) obs-cov)
          ;; prior on initial state
          start-dist (mvn init-mean init-cov)
          ;; prior on transition noise
          trans-dist (mvn (zero-vector K) trans-cov)]
	(predict :states
      (matrix 
        (reduce (fn [states obs]
                  (let [;; sample next state
                        prev-state (peek states)
                        state (if prev-state
                         	      (add (mmul trans-matrix prev-state)
                                       (sample trans-dist))
                                  (sample start-dist))]
                    ;; observe next data point (when available)
                    (observe obs-dist (sub (mmul obs-matrix state) obs))
                    ;; append state to sequence and continue with next obs
                    (conj states state)))
                ;; start with empty sequence
                []
                ;; loop over data
                observations))))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;kalman/kalman</span>","value":"#'kalman/kalman"}
;; <=

;; @@
(defn expected-value
  [v-fn samples]
  (let [vs (map v-fn samples)
        lws (map get-log-weight samples)
        vlws (map vector vs lws)
        max-lw (reduce max lws)]
    (loop [vlws vlws
           sum-wv 0.0
           sum-w 0.0]
      (if-let [[v lw] (first vlws)]
        (let [w (exp (sub lw max-lw))]
          (recur (rest vlws)
                 (add sum-wv (mul w v))
                 (add sum-w w)))
        (div sum-wv sum-w)))))

(defn square 
  [x]
  (mul x x))

(def samples
  (take 1000
    (doquery :smc
             kalman
             [+observations+ 
              +obs-matrix+ +obs-cov+ 
              +trans-matrix+ +trans-cov+ 
              +init-mean+ +init-cov+]
             :number-of-particles 1000)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;kalman/samples</span>","value":"#'kalman/samples"}
;; <=

;; @@
(def states-post-mean
  (expected-value (comp :states get-predicts) 
                  samples))

(def states-post-var
  (sub (expected-value (comp square :states get-predicts) 
                        samples)
       (square states-post-mean)))

(def states-post-std
  (mat/sqrt states-post-var))

(def states-post-upper
  (add states-post-mean 
       (mul 2 states-post-std)))

(def states-post-lower
  (sub states-post-mean 
       (mul 2 states-post-std)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;kalman/states-post-lower</span>","value":"#'kalman/states-post-lower"}
;; <=

;; @@
(plot/list-plot states-post-mean 
                :joined true
                :plot-range [[-2 2] [-2 2]])

(plot/compose
	(plot/list-plot (mat/slice states-post-mean 1 0)
                    :joined true :color "#48b"
                    :plot-range [:all [-2 2]])
    (plot/list-plot (mat/slice states-post-upper 1 0)
                    :joined true :color "#b48")
    (plot/list-plot (mat/slice states-post-lower 1 0)
                    :joined true :color "#b48"))

(plot/compose
	(plot/list-plot (mat/slice states-post-mean 1 1)
                    :joined true :color "#48b"
                    :plot-range [:all [-2 2]])
    (plot/list-plot (mat/slice states-post-upper 1 1)
                    :joined true :color "#b48")
    (plot/list-plot (mat/slice states-post-lower 1 1)
                    :joined true :color "#b48"))
;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"570a20de-81ac-4640-ac90-00fc685a4627","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":[-2,2]}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"570a20de-81ac-4640-ac90-00fc685a4627","values":[{"x":0,"y":0.9284644570630355},{"x":1,"y":0.9128171170251781},{"x":2,"y":1.072849988685531},{"x":3,"y":1.0715759174523427},{"x":4,"y":1.0261231538536733},{"x":5,"y":1.0223133273718015},{"x":6,"y":0.9509088958793809},{"x":7,"y":0.9697332554800407},{"x":8,"y":0.8830164885828821},{"x":9,"y":0.8160323215415995},{"x":10,"y":0.7560376354718777},{"x":11,"y":0.6576593548433107},{"x":12,"y":0.49381580164629885},{"x":13,"y":0.39014536901249597},{"x":14,"y":0.30825257294319197},{"x":15,"y":0.22931799553577517},{"x":16,"y":0.07360827083546875},{"x":17,"y":-0.12197383205510948},{"x":18,"y":-0.23555671270457917},{"x":19,"y":-0.2752158976693008},{"x":20,"y":-0.4765354060206192},{"x":21,"y":-0.5712350575896978},{"x":22,"y":-0.6763791153297773},{"x":23,"y":-0.791279563362278},{"x":24,"y":-0.9276740752703593},{"x":25,"y":-0.9865091953425711},{"x":26,"y":-0.9991500160155986},{"x":27,"y":-1.1298052735803217},{"x":28,"y":-1.0810250138628426},{"x":29,"y":-1.0308057224176879},{"x":30,"y":-1.01729929624392},{"x":31,"y":-0.9366241183762737},{"x":32,"y":-0.8643034756032913},{"x":33,"y":-0.7991405327325158},{"x":34,"y":-0.7196052479914997},{"x":35,"y":-0.5956115638445258},{"x":36,"y":-0.521785060837457},{"x":37,"y":-0.3692199655626635},{"x":38,"y":-0.08353444524974599},{"x":39,"y":0.05746739211793843},{"x":40,"y":0.1700184302352144},{"x":41,"y":0.25868475768714183},{"x":42,"y":0.383213457819088},{"x":43,"y":0.449821553902056},{"x":44,"y":0.5074825158744286},{"x":45,"y":0.6019361483177307},{"x":46,"y":0.70358164674001},{"x":47,"y":0.7461192708484183},{"x":48,"y":0.7039514482445652},{"x":49,"y":0.8004482562606158},{"x":50,"y":0.7254625749570676},{"x":51,"y":0.6808845705197358},{"x":52,"y":0.6841516329235715},{"x":53,"y":0.7124526268930063},{"x":54,"y":0.7291210738880123},{"x":55,"y":0.6480241046154176},{"x":56,"y":0.5538175458319305},{"x":57,"y":0.5241602354166748},{"x":58,"y":0.4953355294756754},{"x":59,"y":0.3486268627816899},{"x":60,"y":0.22938712495120073},{"x":61,"y":0.02893019218273714},{"x":62,"y":-0.1908995369422202},{"x":63,"y":-0.31764349787312346},{"x":64,"y":-0.3849947154055826},{"x":65,"y":-0.42084658822001686},{"x":66,"y":-0.4547329300630292},{"x":67,"y":-0.5711450711984996},{"x":68,"y":-0.6661509583514131},{"x":69,"y":-0.6107147798999524},{"x":70,"y":-0.5564361707100535},{"x":71,"y":-0.532397926342875},{"x":72,"y":-0.5660886378985814},{"x":73,"y":-0.6047135227775541},{"x":74,"y":-0.680899040566194},{"x":75,"y":-0.7869669100265153},{"x":76,"y":-0.8917932519192799},{"x":77,"y":-1.0180796865439894},{"x":78,"y":-1.1136211961744005},{"x":79,"y":-1.224485343290411},{"x":80,"y":-1.3274036140832135},{"x":81,"y":-1.4077080311929375},{"x":82,"y":-1.4232902566008763},{"x":83,"y":-1.4646225954333643},{"x":84,"y":-1.496506984374569},{"x":85,"y":-1.4350694372497432},{"x":86,"y":-1.356398257489458},{"x":87,"y":-1.2233920503961628},{"x":88,"y":-1.0312197032356287},{"x":89,"y":-0.8227133768780118},{"x":90,"y":-0.6070851217596661},{"x":91,"y":-0.4160754184642476},{"x":92,"y":-0.20948251627279224},{"x":93,"y":-0.02559794905065435},{"x":94,"y":0.13471352443243406},{"x":95,"y":0.339158645300088},{"x":96,"y":0.5613294223727384},{"x":97,"y":0.7549356821928421},{"x":98,"y":0.8887535013252683},{"x":99,"y":0.996857945658989}]},{"name":"298924c2-dd3f-4622-9fad-f78eace58b4c","values":[{"x":0,"y":1.0618125310452604},{"x":1,"y":1.0419615619812859},{"x":2,"y":1.1094081248245924},{"x":3,"y":1.2196152786554793},{"x":4,"y":1.1278969286474871},{"x":5,"y":1.118632933602551},{"x":6,"y":1.0748310252005813},{"x":7,"y":1.1025580586495458},{"x":8,"y":0.9821524438996488},{"x":9,"y":0.8927072326656336},{"x":10,"y":0.8212046749867989},{"x":11,"y":0.7270809127399919},{"x":12,"y":0.6191053166362382},{"x":13,"y":0.568560040723185},{"x":14,"y":0.4146336038770241},{"x":15,"y":0.40399806599004084},{"x":16,"y":0.27721235125655186},{"x":17,"y":-0.03299174896238752},{"x":18,"y":-0.15060995802285748},{"x":19,"y":-0.15087249897792174},{"x":20,"y":-0.34443270731013903},{"x":21,"y":-0.4890776839586661},{"x":22,"y":-0.5982125109607743},{"x":23,"y":-0.6203840335655773},{"x":24,"y":-0.7379490511527755},{"x":25,"y":-0.79034293164736},{"x":26,"y":-0.8150412401462763},{"x":27,"y":-0.9303302279859595},{"x":28,"y":-0.924471968595131},{"x":29,"y":-0.841319371511059},{"x":30,"y":-0.7810421359847943},{"x":31,"y":-0.7078545858022605},{"x":32,"y":-0.6939726281244434},{"x":33,"y":-0.649402080691101},{"x":34,"y":-0.533571494862773},{"x":35,"y":-0.4033549768885698},{"x":36,"y":-0.3487076315478287},{"x":37,"y":-0.23508564231417894},{"x":38,"y":-0.017910893176280085},{"x":39,"y":0.2257340714759239},{"x":40,"y":0.28697412589101673},{"x":41,"y":0.338396809285507},{"x":42,"y":0.4724072130663552},{"x":43,"y":0.5619105086272874},{"x":44,"y":0.6635639396019186},{"x":45,"y":0.7933880261609361},{"x":46,"y":0.8584201802422275},{"x":47,"y":0.8379503743569607},{"x":48,"y":0.7953761568354415},{"x":49,"y":0.9156748598192633},{"x":50,"y":0.9349436233234916},{"x":51,"y":0.8417670779378856},{"x":52,"y":0.8873193777673307},{"x":53,"y":0.9141969974147279},{"x":54,"y":0.9958965052739353},{"x":55,"y":0.7923763097290594},{"x":56,"y":0.6954515549920408},{"x":57,"y":0.6671602436738757},{"x":58,"y":0.6779212884778107},{"x":59,"y":0.5054813839278963},{"x":60,"y":0.44663571500067367},{"x":61,"y":0.20451764617010576},{"x":62,"y":0.005826646665132218},{"x":63,"y":-0.1188123295597592},{"x":64,"y":-0.14566900400106397},{"x":65,"y":-0.1942454013386295},{"x":66,"y":-0.31410285082684514},{"x":67,"y":-0.4859405074530636},{"x":68,"y":-0.5638063696871981},{"x":69,"y":-0.4692601637083499},{"x":70,"y":-0.4568453955883051},{"x":71,"y":-0.324003926794017},{"x":72,"y":-0.42468893724789325},{"x":73,"y":-0.41213921540698545},{"x":74,"y":-0.4751686875453133},{"x":75,"y":-0.6344518151916866},{"x":76,"y":-0.7157186516672022},{"x":77,"y":-0.8395866554494258},{"x":78,"y":-0.8743511684687011},{"x":79,"y":-1.043773969463829},{"x":80,"y":-1.1239330007851243},{"x":81,"y":-1.2027051294526356},{"x":82,"y":-1.2222699783686275},{"x":83,"y":-1.2957369907860379},{"x":84,"y":-1.3282355162191384},{"x":85,"y":-1.234249222549794},{"x":86,"y":-1.1556259647171248},{"x":87,"y":-1.0480921594160684},{"x":88,"y":-0.8238039313975842},{"x":89,"y":-0.6251680121563264},{"x":90,"y":-0.41197232217540314},{"x":91,"y":-0.25146624401280554},{"x":92,"y":-0.02541691922632755},{"x":93,"y":0.16325893394314428},{"x":94,"y":0.31110556979526766},{"x":95,"y":0.536363509912114},{"x":96,"y":0.7462436500189163},{"x":97,"y":0.9535293517572677},{"x":98,"y":1.106696139874461},{"x":99,"y":1.2464034981288112}]},{"name":"a92d7b9b-31f5-465b-a884-37c2d7c17eb9","values":[{"x":0,"y":0.7951163830808106},{"x":1,"y":0.7836726720690703},{"x":2,"y":1.0362918525464695},{"x":3,"y":0.9235365562492063},{"x":4,"y":0.9243493790598594},{"x":5,"y":0.925993721141052},{"x":6,"y":0.8269867665581804},{"x":7,"y":0.8369084523105356},{"x":8,"y":0.7838805332661153},{"x":9,"y":0.7393574104175655},{"x":10,"y":0.6908705959569565},{"x":11,"y":0.5882377969466296},{"x":12,"y":0.36852628665635945},{"x":13,"y":0.211730697301807},{"x":14,"y":0.20187154200935986},{"x":15,"y":0.054637925081509525},{"x":16,"y":-0.12999580958561435},{"x":17,"y":-0.21095591514783144},{"x":18,"y":-0.32050346738630087},{"x":19,"y":-0.3995592963606799},{"x":20,"y":-0.6086381047310994},{"x":21,"y":-0.6533924312207297},{"x":22,"y":-0.7545457196987804},{"x":23,"y":-0.9621750931589788},{"x":24,"y":-1.117399099387943},{"x":25,"y":-1.1826754590377822},{"x":26,"y":-1.183258791884921},{"x":27,"y":-1.3292803191746838},{"x":28,"y":-1.237578059130554},{"x":29,"y":-1.2202920733243168},{"x":30,"y":-1.2535564565030457},{"x":31,"y":-1.165393650950287},{"x":32,"y":-1.0346343230821393},{"x":33,"y":-0.9488789847739307},{"x":34,"y":-0.9056390011202264},{"x":35,"y":-0.7878681508004819},{"x":36,"y":-0.6948624901270853},{"x":37,"y":-0.5033542888111481},{"x":38,"y":-0.1491579973232119},{"x":39,"y":-0.11079928724004702},{"x":40,"y":0.05306273457941209},{"x":41,"y":0.17897270608877663},{"x":42,"y":0.2940197025718208},{"x":43,"y":0.33773259917682463},{"x":44,"y":0.35140109214693854},{"x":45,"y":0.41048427047452524},{"x":46,"y":0.5487431132377925},{"x":47,"y":0.6542881673398759},{"x":48,"y":0.612526739653689},{"x":49,"y":0.6852216527019682},{"x":50,"y":0.5159815265906436},{"x":51,"y":0.520002063101586},{"x":52,"y":0.4809838880798123},{"x":53,"y":0.5107082563712846},{"x":54,"y":0.4623456425020893},{"x":55,"y":0.5036718995017758},{"x":56,"y":0.4121835366718203},{"x":57,"y":0.3811602271594738},{"x":58,"y":0.31274977047354},{"x":59,"y":0.19177234163548348},{"x":60,"y":0.01213853490172781},{"x":61,"y":-0.1466572618046315},{"x":62,"y":-0.3876257205495726},{"x":63,"y":-0.5164746661864877},{"x":64,"y":-0.6243204268101012},{"x":65,"y":-0.6474477751014043},{"x":66,"y":-0.5953630092992133},{"x":67,"y":-0.6563496349439355},{"x":68,"y":-0.7684955470156282},{"x":69,"y":-0.7521693960915549},{"x":70,"y":-0.6560269458318018},{"x":71,"y":-0.7407919258917329},{"x":72,"y":-0.7074883385492696},{"x":73,"y":-0.7972878301481228},{"x":74,"y":-0.8866293935870747},{"x":75,"y":-0.939482004861344},{"x":76,"y":-1.0678678521713576},{"x":77,"y":-1.196572717638553},{"x":78,"y":-1.3528912238800999},{"x":79,"y":-1.405196717116993},{"x":80,"y":-1.5308742273813027},{"x":81,"y":-1.6127109329332394},{"x":82,"y":-1.624310534833125},{"x":83,"y":-1.6335082000806906},{"x":84,"y":-1.6647784525299998},{"x":85,"y":-1.6358896519496924},{"x":86,"y":-1.5571705502617912},{"x":87,"y":-1.3986919413762573},{"x":88,"y":-1.2386354750736732},{"x":89,"y":-1.0202587415996973},{"x":90,"y":-0.8021979213439291},{"x":91,"y":-0.5806845929156896},{"x":92,"y":-0.39354811331925693},{"x":93,"y":-0.21445483204445298},{"x":94,"y":-0.04167852093039953},{"x":95,"y":0.14195378068806197},{"x":96,"y":0.3764151947265605},{"x":97,"y":0.5563420126284165},{"x":98,"y":0.6708108627760755},{"x":99,"y":0.7473123931891666}]}],"marks":[{"type":"line","from":{"data":"570a20de-81ac-4640-ac90-00fc685a4627"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#48b"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"298924c2-dd3f-4622-9fad-f78eace58b4c"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#b48"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"a92d7b9b-31f5-465b-a884-37c2d7c17eb9"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#b48"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"570a20de-81ac-4640-ac90-00fc685a4627\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain [-2 2]}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"570a20de-81ac-4640-ac90-00fc685a4627\", :values ({:x 0, :y 0.9284644570630355} {:x 1, :y 0.9128171170251781} {:x 2, :y 1.072849988685531} {:x 3, :y 1.0715759174523427} {:x 4, :y 1.0261231538536733} {:x 5, :y 1.0223133273718015} {:x 6, :y 0.9509088958793809} {:x 7, :y 0.9697332554800407} {:x 8, :y 0.8830164885828821} {:x 9, :y 0.8160323215415995} {:x 10, :y 0.7560376354718777} {:x 11, :y 0.6576593548433107} {:x 12, :y 0.49381580164629885} {:x 13, :y 0.39014536901249597} {:x 14, :y 0.30825257294319197} {:x 15, :y 0.22931799553577517} {:x 16, :y 0.07360827083546875} {:x 17, :y -0.12197383205510948} {:x 18, :y -0.23555671270457917} {:x 19, :y -0.2752158976693008} {:x 20, :y -0.4765354060206192} {:x 21, :y -0.5712350575896978} {:x 22, :y -0.6763791153297773} {:x 23, :y -0.791279563362278} {:x 24, :y -0.9276740752703593} {:x 25, :y -0.9865091953425711} {:x 26, :y -0.9991500160155986} {:x 27, :y -1.1298052735803217} {:x 28, :y -1.0810250138628426} {:x 29, :y -1.0308057224176879} {:x 30, :y -1.01729929624392} {:x 31, :y -0.9366241183762737} {:x 32, :y -0.8643034756032913} {:x 33, :y -0.7991405327325158} {:x 34, :y -0.7196052479914997} {:x 35, :y -0.5956115638445258} {:x 36, :y -0.521785060837457} {:x 37, :y -0.3692199655626635} {:x 38, :y -0.08353444524974599} {:x 39, :y 0.05746739211793843} {:x 40, :y 0.1700184302352144} {:x 41, :y 0.25868475768714183} {:x 42, :y 0.383213457819088} {:x 43, :y 0.449821553902056} {:x 44, :y 0.5074825158744286} {:x 45, :y 0.6019361483177307} {:x 46, :y 0.70358164674001} {:x 47, :y 0.7461192708484183} {:x 48, :y 0.7039514482445652} {:x 49, :y 0.8004482562606158} {:x 50, :y 0.7254625749570676} {:x 51, :y 0.6808845705197358} {:x 52, :y 0.6841516329235715} {:x 53, :y 0.7124526268930063} {:x 54, :y 0.7291210738880123} {:x 55, :y 0.6480241046154176} {:x 56, :y 0.5538175458319305} {:x 57, :y 0.5241602354166748} {:x 58, :y 0.4953355294756754} {:x 59, :y 0.3486268627816899} {:x 60, :y 0.22938712495120073} {:x 61, :y 0.02893019218273714} {:x 62, :y -0.1908995369422202} {:x 63, :y -0.31764349787312346} {:x 64, :y -0.3849947154055826} {:x 65, :y -0.42084658822001686} {:x 66, :y -0.4547329300630292} {:x 67, :y -0.5711450711984996} {:x 68, :y -0.6661509583514131} {:x 69, :y -0.6107147798999524} {:x 70, :y -0.5564361707100535} {:x 71, :y -0.532397926342875} {:x 72, :y -0.5660886378985814} {:x 73, :y -0.6047135227775541} {:x 74, :y -0.680899040566194} {:x 75, :y -0.7869669100265153} {:x 76, :y -0.8917932519192799} {:x 77, :y -1.0180796865439894} {:x 78, :y -1.1136211961744005} {:x 79, :y -1.224485343290411} {:x 80, :y -1.3274036140832135} {:x 81, :y -1.4077080311929375} {:x 82, :y -1.4232902566008763} {:x 83, :y -1.4646225954333643} {:x 84, :y -1.496506984374569} {:x 85, :y -1.4350694372497432} {:x 86, :y -1.356398257489458} {:x 87, :y -1.2233920503961628} {:x 88, :y -1.0312197032356287} {:x 89, :y -0.8227133768780118} {:x 90, :y -0.6070851217596661} {:x 91, :y -0.4160754184642476} {:x 92, :y -0.20948251627279224} {:x 93, :y -0.02559794905065435} {:x 94, :y 0.13471352443243406} {:x 95, :y 0.339158645300088} {:x 96, :y 0.5613294223727384} {:x 97, :y 0.7549356821928421} {:x 98, :y 0.8887535013252683} {:x 99, :y 0.996857945658989})} {:name \"298924c2-dd3f-4622-9fad-f78eace58b4c\", :values ({:x 0, :y 1.0618125310452604} {:x 1, :y 1.0419615619812859} {:x 2, :y 1.1094081248245924} {:x 3, :y 1.2196152786554793} {:x 4, :y 1.1278969286474871} {:x 5, :y 1.118632933602551} {:x 6, :y 1.0748310252005813} {:x 7, :y 1.1025580586495458} {:x 8, :y 0.9821524438996488} {:x 9, :y 0.8927072326656336} {:x 10, :y 0.8212046749867989} {:x 11, :y 0.7270809127399919} {:x 12, :y 0.6191053166362382} {:x 13, :y 0.568560040723185} {:x 14, :y 0.4146336038770241} {:x 15, :y 0.40399806599004084} {:x 16, :y 0.27721235125655186} {:x 17, :y -0.03299174896238752} {:x 18, :y -0.15060995802285748} {:x 19, :y -0.15087249897792174} {:x 20, :y -0.34443270731013903} {:x 21, :y -0.4890776839586661} {:x 22, :y -0.5982125109607743} {:x 23, :y -0.6203840335655773} {:x 24, :y -0.7379490511527755} {:x 25, :y -0.79034293164736} {:x 26, :y -0.8150412401462763} {:x 27, :y -0.9303302279859595} {:x 28, :y -0.924471968595131} {:x 29, :y -0.841319371511059} {:x 30, :y -0.7810421359847943} {:x 31, :y -0.7078545858022605} {:x 32, :y -0.6939726281244434} {:x 33, :y -0.649402080691101} {:x 34, :y -0.533571494862773} {:x 35, :y -0.4033549768885698} {:x 36, :y -0.3487076315478287} {:x 37, :y -0.23508564231417894} {:x 38, :y -0.017910893176280085} {:x 39, :y 0.2257340714759239} {:x 40, :y 0.28697412589101673} {:x 41, :y 0.338396809285507} {:x 42, :y 0.4724072130663552} {:x 43, :y 0.5619105086272874} {:x 44, :y 0.6635639396019186} {:x 45, :y 0.7933880261609361} {:x 46, :y 0.8584201802422275} {:x 47, :y 0.8379503743569607} {:x 48, :y 0.7953761568354415} {:x 49, :y 0.9156748598192633} {:x 50, :y 0.9349436233234916} {:x 51, :y 0.8417670779378856} {:x 52, :y 0.8873193777673307} {:x 53, :y 0.9141969974147279} {:x 54, :y 0.9958965052739353} {:x 55, :y 0.7923763097290594} {:x 56, :y 0.6954515549920408} {:x 57, :y 0.6671602436738757} {:x 58, :y 0.6779212884778107} {:x 59, :y 0.5054813839278963} {:x 60, :y 0.44663571500067367} {:x 61, :y 0.20451764617010576} {:x 62, :y 0.005826646665132218} {:x 63, :y -0.1188123295597592} {:x 64, :y -0.14566900400106397} {:x 65, :y -0.1942454013386295} {:x 66, :y -0.31410285082684514} {:x 67, :y -0.4859405074530636} {:x 68, :y -0.5638063696871981} {:x 69, :y -0.4692601637083499} {:x 70, :y -0.4568453955883051} {:x 71, :y -0.324003926794017} {:x 72, :y -0.42468893724789325} {:x 73, :y -0.41213921540698545} {:x 74, :y -0.4751686875453133} {:x 75, :y -0.6344518151916866} {:x 76, :y -0.7157186516672022} {:x 77, :y -0.8395866554494258} {:x 78, :y -0.8743511684687011} {:x 79, :y -1.043773969463829} {:x 80, :y -1.1239330007851243} {:x 81, :y -1.2027051294526356} {:x 82, :y -1.2222699783686275} {:x 83, :y -1.2957369907860379} {:x 84, :y -1.3282355162191384} {:x 85, :y -1.234249222549794} {:x 86, :y -1.1556259647171248} {:x 87, :y -1.0480921594160684} {:x 88, :y -0.8238039313975842} {:x 89, :y -0.6251680121563264} {:x 90, :y -0.41197232217540314} {:x 91, :y -0.25146624401280554} {:x 92, :y -0.02541691922632755} {:x 93, :y 0.16325893394314428} {:x 94, :y 0.31110556979526766} {:x 95, :y 0.536363509912114} {:x 96, :y 0.7462436500189163} {:x 97, :y 0.9535293517572677} {:x 98, :y 1.106696139874461} {:x 99, :y 1.2464034981288112})} {:name \"a92d7b9b-31f5-465b-a884-37c2d7c17eb9\", :values ({:x 0, :y 0.7951163830808106} {:x 1, :y 0.7836726720690703} {:x 2, :y 1.0362918525464695} {:x 3, :y 0.9235365562492063} {:x 4, :y 0.9243493790598594} {:x 5, :y 0.925993721141052} {:x 6, :y 0.8269867665581804} {:x 7, :y 0.8369084523105356} {:x 8, :y 0.7838805332661153} {:x 9, :y 0.7393574104175655} {:x 10, :y 0.6908705959569565} {:x 11, :y 0.5882377969466296} {:x 12, :y 0.36852628665635945} {:x 13, :y 0.211730697301807} {:x 14, :y 0.20187154200935986} {:x 15, :y 0.054637925081509525} {:x 16, :y -0.12999580958561435} {:x 17, :y -0.21095591514783144} {:x 18, :y -0.32050346738630087} {:x 19, :y -0.3995592963606799} {:x 20, :y -0.6086381047310994} {:x 21, :y -0.6533924312207297} {:x 22, :y -0.7545457196987804} {:x 23, :y -0.9621750931589788} {:x 24, :y -1.117399099387943} {:x 25, :y -1.1826754590377822} {:x 26, :y -1.183258791884921} {:x 27, :y -1.3292803191746838} {:x 28, :y -1.237578059130554} {:x 29, :y -1.2202920733243168} {:x 30, :y -1.2535564565030457} {:x 31, :y -1.165393650950287} {:x 32, :y -1.0346343230821393} {:x 33, :y -0.9488789847739307} {:x 34, :y -0.9056390011202264} {:x 35, :y -0.7878681508004819} {:x 36, :y -0.6948624901270853} {:x 37, :y -0.5033542888111481} {:x 38, :y -0.1491579973232119} {:x 39, :y -0.11079928724004702} {:x 40, :y 0.05306273457941209} {:x 41, :y 0.17897270608877663} {:x 42, :y 0.2940197025718208} {:x 43, :y 0.33773259917682463} {:x 44, :y 0.35140109214693854} {:x 45, :y 0.41048427047452524} {:x 46, :y 0.5487431132377925} {:x 47, :y 0.6542881673398759} {:x 48, :y 0.612526739653689} {:x 49, :y 0.6852216527019682} {:x 50, :y 0.5159815265906436} {:x 51, :y 0.520002063101586} {:x 52, :y 0.4809838880798123} {:x 53, :y 0.5107082563712846} {:x 54, :y 0.4623456425020893} {:x 55, :y 0.5036718995017758} {:x 56, :y 0.4121835366718203} {:x 57, :y 0.3811602271594738} {:x 58, :y 0.31274977047354} {:x 59, :y 0.19177234163548348} {:x 60, :y 0.01213853490172781} {:x 61, :y -0.1466572618046315} {:x 62, :y -0.3876257205495726} {:x 63, :y -0.5164746661864877} {:x 64, :y -0.6243204268101012} {:x 65, :y -0.6474477751014043} {:x 66, :y -0.5953630092992133} {:x 67, :y -0.6563496349439355} {:x 68, :y -0.7684955470156282} {:x 69, :y -0.7521693960915549} {:x 70, :y -0.6560269458318018} {:x 71, :y -0.7407919258917329} {:x 72, :y -0.7074883385492696} {:x 73, :y -0.7972878301481228} {:x 74, :y -0.8866293935870747} {:x 75, :y -0.939482004861344} {:x 76, :y -1.0678678521713576} {:x 77, :y -1.196572717638553} {:x 78, :y -1.3528912238800999} {:x 79, :y -1.405196717116993} {:x 80, :y -1.5308742273813027} {:x 81, :y -1.6127109329332394} {:x 82, :y -1.624310534833125} {:x 83, :y -1.6335082000806906} {:x 84, :y -1.6647784525299998} {:x 85, :y -1.6358896519496924} {:x 86, :y -1.5571705502617912} {:x 87, :y -1.3986919413762573} {:x 88, :y -1.2386354750736732} {:x 89, :y -1.0202587415996973} {:x 90, :y -0.8021979213439291} {:x 91, :y -0.5806845929156896} {:x 92, :y -0.39354811331925693} {:x 93, :y -0.21445483204445298} {:x 94, :y -0.04167852093039953} {:x 95, :y 0.14195378068806197} {:x 96, :y 0.3764151947265605} {:x 97, :y 0.5563420126284165} {:x 98, :y 0.6708108627760755} {:x 99, :y 0.7473123931891666})}), :marks ({:type \"line\", :from {:data \"570a20de-81ac-4640-ac90-00fc685a4627\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#48b\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"298924c2-dd3f-4622-9fad-f78eace58b4c\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#b48\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"a92d7b9b-31f5-465b-a884-37c2d7c17eb9\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#b48\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; @@

;; @@
