;; gorilla-repl.fileformat = 1

;; **
;;; # Gaussian mixture model using exchangeable random procedures on Iris data
;;; 
;;; This worksheet extends the worksheet <a href="http://www.robots.ox.ac.uk/~fwood/anglican/examples/viewer/?worksheet=gmm-iris">"Gaussian mixture model: Iris data"</a>. Here, we provide an example of implementing and using exactly the same generative probabilistic model, namely a Bayesian mixtures of Gaussians, for the purpose of doing inference on the same dataset of Iris flowers.
;;; 
;;; The original worksheet presents the model with uncollapsed conjugate pairs. This requires the inference machinery to spend a significant amount of computational resources on integrating the hyper-paramers by sampling them. This worksheet, in constrast, demos the collapsed version of the same model, where hyperparameters are integrated out. From the point of view of statistics, it is possible because the model uses conjugate priors. From the point of view of probabilistic programming, it is being achieved by using exchangeable random procedures.
;; **

;; **
;;; Firstly, let us repeat the model. The mixture of Gaussians supposes that the data @@\\{ \mathbf{x}_n \\}@@ can be modeled by a mixture of up to @@K@@ different Gaussian distributions, each with a mean @@\boldsymbol{\mu}\_k@@ and a covariance matrix @@\boldsymbol{\Sigma}_k@@. Each data point @@\mathbf{x}\_n@@ is assigned to one of the clusters @@k = 1,\dots,K@@ via a latent class indicator variable @@z_n@@. The probability of any particular measurement being assigned to some class @@k@@ is given by a component-wise probability @@\pi_k@@.
;;; 
;;; In a Bayesian mixture model, we place _prior distributions_ on the hyper-parameters of the model:
;;; 
;;; $$\boldsymbol{\pi} \sim \mathrm{Dirichlet}(\alpha),$$
;;; $$\boldsymbol{\Sigma}_k \sim \mathrm{inverse\text{-}Wishart}(\mathbf{\Psi}, \nu),$$
;;; $$\boldsymbol{\mu}_k \big|\ \boldsymbol{\Sigma}_k \sim \mathrm{Normal}\hspace{-0.2em}\left(\boldsymbol{\mu}_0, \frac{1}{\lambda} \boldsymbol{\Sigma}_k \right),$$
;;; 
;;; where @@\alpha@@, @@\mathbf{\Psi}@@, @@\nu@@, @@\boldsymbol{\mu}_0@@, and @@\lambda@@ are the fixed hyper-priors that are chosen by us, based on the statistics of the observation data. The distribution over the mean and covariance of the multivariate distribution is called Normal-inverse-Wishart distribution @@\operatorname{NiW}(\boldsymbol{\mu}_0, \lambda, \mathbf{\Psi}, \nu)@@. The fact that we are placing distributions on the hyper-parameters means that we also treat them as latent variables, in addition to indicator variables @@z_n@@.
;;; 
;;; Please, note that in contrast to the <a href="http://www.robots.ox.ac.uk/~fwood/anglican/examples/viewer/?worksheet=gmm-iris">original worksheet</a>, we work not with a *precision matrix* @@\boldsymbol{\Lambda}@@, but directly with a *covariance matrix* @@\boldsymbol{\Sigma} \equiv \boldsymbol{\Lambda}^{-1}@@; this is just for convenience. We also use the letter @@\lambda@@ instead of the letter @@\beta = \lambda@@, in order to be consistent with the definition of the <a href="https://en.wikipedia.org/wiki/Normal-inverse-Wishart_distribution">Normal-inverse-Wishart distribution</a> in Wikipedia.
;;; 
;; **

;; **
;;; The distribution over latent class indicators is defined as
;;; $$z_n \big|\ \boldsymbol{\pi} \sim \mathrm{Categorical}(\boldsymbol{\pi}).$$
;;; 
;;; Finally, the likelihood of the data is defined as
;;; $$\mathbf{x}_n \big|\ z_n=k, \ \boldsymbol{\mu}_k, \ \boldsymbol{\Lambda}_k \sim \textrm{Normal}\hspace{-0.2em}\left(\ \boldsymbol{\mu}_k, \boldsymbol{\Sigma}_k \right).$$
;;; The observing variables @@\mathbf{x}_n@@ are often called emissions, and the distribution on them is called the emission distribution.
;;; 
;;; The priors over hyper-parameters @@\boldsymbol{\mu}_0, \lambda, \mathbf{\Psi}, \nu@@ in this model are specifically chosen to be [conjugate](http://en.wikipedia.org/wiki/Conjugate_prior) to the emissions @@\mathbf{x}_n@@. This means that the prior distribution @@p(\boldsymbol{\mu}_0, \lambda, \mathbf{\Psi}, \nu)@@ over hyper-parameters for any cluster @@k@@ is in the same Normal-inverse-Wishart distribution family as the posterior distribution over hyper-parameters @@p(\boldsymbol{\mu}_k{'}, \lambda_k{'}, \mathbf{\Psi}_k{'}, \nu_k{'})@@ for the cluster @@k@@ given emissions @@\\{ x_i \\} @@, such that @@z_i = k@@.
;;; 
;;; Given the hyper-priors of the Normal-inverse-Wishart distribution @@\boldsymbol{\mu}_0, \lambda, \mathbf{\Psi}, \nu@@ and the emission values of the Gaussian emission distributions @@\mathbf{x}_i@@, the posterior hyper-priors of the posterior Normal-inverse-Wishart distribution can be calculated <a href="https://en.wikipedia.org/wiki/Conjugate_prior">as follows</a>:
;;; 
;;; $$\boldsymbol{\mu}{'} = \frac{\lambda\boldsymbol\mu_0+n\mathbf{\bar{x}}}{\lambda+n},$$
;;; $$\lambda{'} = \lambda + n,$$
;;; $$\nu{'} = \nu+n,$$
;;; $$\boldsymbol\Psi{'} = \boldsymbol\Psi + \mathbf{C} + \frac{\lambda n}{\lambda+n}(\mathbf{\bar{x}}-\boldsymbol\mu_0)(\mathbf{\bar{x}}-\boldsymbol\mu_0)^T,$$
;;; 
;; **

;; **
;;; where @@n@@ is number of observed data points, the value @@\mathbf{\bar{x}}@@ is their mean, and $$\mathbf{C} = \sum_{i=1}^{n}{\left(\mathbf{x}_i - \mathbf{\bar{x}}\right)\left(\mathbf{x}_i - \mathbf{\bar{x}}\right)^T}.$$
;; **

;; **
;;; 
;; **

;; **
;;; Conjugate pairs can be implemented and used in certain probabilistic programming languages, including Anglican, as exchangeable random processes (XRPs). For the details from the point of view of statistics, we refer the reader to <a href="de Finetti's theorem">de Finetti's theorem and its extensions</a>. An exchangeable random procedure in Anglican, once initialised with hyper-priors, is able to produce a sequence of exchangeable random variables.
;;; 
;;; For example, to initialise a new XRP object of the Symmetric-Dirichlet-Discrete conjugate pair, we write `(def dsd-instance (XRP (DSD alpha)))`, where the @@\alpha@@ is the hyper-prior, namely the general concentration parameter for the symmetric Dirichlet distribution. To draw one sample from this XRP object, we use `(SAMPLE dsd-instance)`. To incorporate an observation into the state of this XRP, we call `(OBSERVE dsd-instance emission-value)`. Finally, new types of XRPs might be written for Anglican using the macro `defproc`. For details, please, refer to the bottom part of <a href="http://www.robots.ox.ac.uk/~fwood/anglican/language/index.html#distributions">Section "Distributions"</a> on Anglican web-site.
;; **

;; **
;;; Let us define a new Clojure namespace for our model, and then define a collapsed XRP for the conjugate pair of the Normal-inverse-Wishart hyper-parameters and Normal emissions. Firstly, we define a new Clojure namespace:
;; **

;; @@
(ns gmm-iris-collapsed
  (:use [anglican core runtime emit [state :only [get-predicts]]]
        [anglib xrp])
  (:require [gorilla-plot.core :as plot]
            [clojure.data.csv :as csv]
            [clojure.java.io :as io]
            [clojure.core.matrix :as m]
            [clojure.core.matrix.operators :as op]
            [clojure.core.matrix.linear :as linalg]))

(m/set-current-implementation :vectorz)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-keyword'>:vectorz</span>","value":":vectorz"}
;; <=

;; **
;;; The posterior predictive of the Normal-inverse-Wishart distribution, given updated hyper-priors, is the multivariate t-distribution $$t_{{\nu}'-p+1}\left(\tilde{\mathbf{x}}|{\boldsymbol\mu_0}',\frac{{\lambda}'+1}{{\lambda}'({\nu}'-p+1)}\boldsymbol\Psi'\right),$$
;;; where @@p@@ is the cardinality of @@\Psi@@.
;;; 
;;; Let us introduce to Anglican the multivariate t-distribution and the "continuous" chi-squared distribution, on which the multivariate t-distribution depends:
;; **

;; @@
(defn continuous-chi-squared
  [nu]
  (let
    [
     ; Chi-Squared(nu) ~ Gamma(shape = nu / 2, scale = 2.0).
     ; In Colt library Gamma is parametrised in its second argument
     ; by rate, where scale = 1 / rate.
     gamma-dist (gamma (* nu 0.5) 0.5)]
  (reify distribution
    (sample [this]
      (sample gamma-dist))
    (observe [this value]
      (+
        (* (- (* nu 0.5) 1) (log value))
        (* -0.5 value)
        (* -0.5 nu (log 2))
        (* -1.0 (log-gamma-fn (* 0.5 nu))))))))

(defn multivariate-t
  "Multivariate T-distribution."
  ; Implemented according to http://en.wikipedia.org/wiki/Multivariate_t-distribution
  [nu mu Sigma]
  (let
    [p (first (m/shape Sigma))
     mvn-dist (mvn (vec (repeat p 0)) Sigma)
     chi-squared-dist (continuous-chi-squared nu)]
    (reify distribution
      (sample [this]
              (let
                [y (sample mvn-dist)
                 u (sample chi-squared-dist)]
                (m/add
                 (m/mul y (sqrt (/ nu u)))
                 mu)))
      (observe [this value]
               (let
                 [mmul-result
                  (m/mmul
                   (m/transpose (m/sub value mu))
                   (m/inverse Sigma)
                   (m/sub value mu))
                  ]
                 (-
                  (log-gamma-fn (* 0.5 (+ nu p)))
                  (+
                   (log-gamma-fn (* 0.5 nu))
                   (* 0.5 p (log nu))
                   (* 0.5 p (log Math/PI))
                   (* 0.5 (log (m/det Sigma)))
                   (* 0.5 (+ nu p)
                      (log
                       (+ 1.0
                          (* (/ 1.0 nu)
                             mmul-result)))))))))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gmm-iris-collapsed/multivariate-t</span>","value":"#'gmm-iris-collapsed/multivariate-t"}
;; <=

;; **
;;; Now, let us introduce a helper procedure that calculates the posterior hyper-parameters @@\mu_0', \lambda', \boldsymbol\Psi', \nu'@@ of the Normal-inverse-Wishart distribution given the emissions @@\mathbf{x}_i@@:
;; **

;; @@
(defn produce-matrix-from-vector
  [input-vector]
  (m/matrix (m/reshape input-vector [(count input-vector) 1])))

;; Returns parameters of posterior predictive of the MVN-NIW conjugate pair
;; Input: NIW initial hyperparameters; sufficient statistics of observes
;; Output: parameters of posterior predictive
(defn mvn-conjugate-fast-posterior-predictive
  [mu kappa nu Psi N samples-sum samples-squared-sum]
  (let [mu (produce-matrix-from-vector mu)
        p (first (m/shape Psi))
        samples-mean (if (> N 0) (m/mul (/ 1.0 N) samples-sum) (repeat p 0.0))
        samples-unnorm-cov (if (> N 0)
                             (m/add (m/mul (/ 1.0 N) samples-squared-sum)
                                    (m/mul (/ -1.0 (* N N))
                                           (m/mmul (produce-matrix-from-vector samples-sum)
                                                   (m/transpose (produce-matrix-from-vector samples-sum)))))
                             (repeat p (repeat p 0.0)))
        samples-mean-minus-mu (produce-matrix-from-vector (m/sub samples-mean mu))
        mu-prime (m/add (m/mul (/ kappa (+ kappa N))
                               mu)
                        (m/mul (/ 1.0 (+ kappa N))
                               samples-sum))
        kappa-prime (+ kappa N)
        nu-prime (+ nu N)
        Psi-prime (m/add Psi
                         samples-unnorm-cov
                         (m/mul (/ (* kappa N) (+ kappa N))
                                (m/mmul samples-mean-minus-mu
                                        (m/transpose samples-mean-minus-mu))))]
    [(- nu-prime (dec p))
     mu-prime
     (m/mul (/ (inc kappa-prime)
               (* kappa-prime (- nu-prime (dec p))))
            Psi-prime)]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gmm-iris-collapsed/mvn-conjugate-fast-posterior-predictive</span>","value":"#'gmm-iris-collapsed/mvn-conjugate-fast-posterior-predictive"}
;; <=

;; **
;;; Finally, we introduce the code for the XRP:
;; **

;; @@
;; MVN-NIW random process
;; Input: initial hyperparameters of NIW
;; Output: random process object which can
;;   produce: outputs posterior predictive of MVN-NIW
;;   absorb: given a sample, returns the same process with updated hyperparameters
(defproc mvn-conjugate-fast
  "Multivariate normal with unknown mean and covariance matrix."
  [mu kappa nu Psi]
  [N 0
   samples-sum (repeat (first (m/shape Psi)) 0)
   samples-squared-sum (m/matrix (repeat (first (m/shape Psi)) (repeat (first (m/shape Psi)) 0)))]
  (produce [this]
           (apply multivariate-t
                  (mvn-conjugate-fast-posterior-predictive mu kappa nu Psi N
                                                           samples-sum samples-squared-sum)))
  (absorb [this sample]
          (let [sample-as-matrix (produce-matrix-from-vector sample)]
            (mvn-conjugate-fast mu kappa nu Psi
                                (inc N)
                                (m/add samples-sum sample)
                                (m/add samples-squared-sum
                                       (m/mmul sample-as-matrix
                                               (m/transpose sample-as-matrix)))))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>#&lt;MultiFn clojure.lang.MultiFn@11f25a94&gt;</span>","value":"#<MultiFn clojure.lang.MultiFn@11f25a94>"}
;; <=

;; **
;;; Once the new XRP is define, we can define the model using this new collapsed conjugate pair of the Normal-inverse-Wishart prior and Normal emissions:
;; **

;; @@
;; helper methods
(defn row-mean [data] (op// (reduce op/+ data) (m/row-count data)))
(defn invert
  ([W] (linalg/solve W))
  ([kappa W] (linalg/solve (op/* kappa W))))

;; bring required primitive procedures into our namespace
(use '[clojure.core.matrix :only [shape identity-matrix get-row]])

(defn arraysubvector-to-matrix
  [array-subvector]
  (m/reshape (m/to-vector array-subvector) (conj (m/shape array-subvector) 1)))

;; model definition
(with-primitive-procedures [row-mean invert shape identity-matrix get-row
                            mvn-conjugate-fast
                            arraysubvector-to-matrix]
  (defquery gmm-collapsed [data & [hyperparams]]
    (println "provided hyperparameters:" hyperparams)
    (let [[N D] (shape data)

          ;; there are many hyperparameters; we provide defaults
          K 		(:K 		hyperparams	10)
          alpha 	(:alpha		hyperparams	1.0)
          mu-0		(:mu-0		hyperparams (row-mean data))
          lambda-0 	(:lambda-0	hyperparams	(identity-matrix D))
          nu		(:nu		hyperparams	(inc D))
          kappa		(:kappa		hyperparams 1.0)
          produce-mvn-process (fn [] (XRP (mvn-conjugate-fast mu-0 kappa nu lambda-0)))

          ;; sample the latent variables.
          ;;
          ;; mu and sigma are per-cluster; ideally we would sample them lazily
          pi (sample (dirichlet (repeat K alpha)))
          mvn-process (into [] (map (fn [void] (produce-mvn-process))
                                    (repeat K (list 'void))))]
      ;; for each data point, sample z[n] and `observe`
      (loop [n 0
             z []]
        (if (= n N)
          (predict :z z)
          (let [row (get-row data n)
                k (sample (discrete pi))]
            (OBSERVE (get mvn-process k) (arraysubvector-to-matrix row))
            (recur (inc n) (conj z k))))))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gmm-iris-collapsed/gmm-collapsed</span>","value":"#'gmm-iris-collapsed/gmm-collapsed"}
;; <=

;; @@
(defn draw-samples [n-samples thin]
  "simple helper to draw samples and thin them; throw out 50% as burnin"
  (drop n-samples 
        (take (* 2 n-samples)
              (take-nth thin (doquery :pgibbs gmm-collapsed [X {:K 5}] :number-of-particles thin)))))

;; draw samples; thin
(def samples (draw-samples 10 10))

;; plot them, each; see how the samples evolve?
(map (fn [sample]
       (let [y-hat (:z (get-predicts sample))]
         (plot-pca X y-hat #(get colors %))))
     samples)

;; @@
;; ->
;;; provided hyperparameters: {:K 5}
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gmm-iris-collapsed/samples</span>","value":"#'gmm-iris-collapsed/samples"}
;; <=

;; **
;;; Say here how simple it is :).
;; **

;; **
;;; Everything below is copied from the old worksheet.
;;; 
;;; ***
;; **

;; @@

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-keyword'>:vectorz</span>","value":":vectorz"}
;; <=

;; **
;;; The data we will use is the [Fisher Iris data](https://archive.ics.uci.edu/ml/datasets/Iris);
;;; each row of data consists of four measurements made regarding an Iris flower.
;;; We will cluster the measurements using a Gaussian mixture model.
;;; 
;;; We begin by reading in the Iris data set from its CSV file, placing the measuments into a matrix @@X@@ and the labels into a vector @@y@@.
;; **

;; @@
(def iris-data
  (loop [X []
         y []
         data (with-open [file (io/reader "data/iris.csv")]
                (doall (csv/read-csv file)))]
    (def row (first data))
    (if (nil? row)
      [(m/matrix X) y]
      (recur (conj X (map #(Float/parseFloat %) (take 4 row)))
             (conj y (keyword (peek row)))
             (rest data)))))

(def X (get iris-data 0))
(def y (get iris-data 1))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gmm-iris-collapsed/y</span>","value":"#'gmm-iris-collapsed/y"}
;; <=

;; **
;;; Let's plot the Iris data to get an idea what it looks like. The data is 4-dimensional (i.e., 4 measurements per flower), but we can use PCA to project it down into 2 for visualization purposes.
;; **

;; @@
(def label-indices (apply zipmap ((fn [v] [(into () v) (range (count v))]) (into #{} y))))
(def colors ["#34C6F2" "#64F54A" "#F13F6F" "#E4AEFB" "#253B3E" 
             "#8B5904" "#BBC324" "#EAC092" "#360A07" "#0888A4"])
(defn get-color [label]
  (get colors (label label-indices)))

(defn black [label]  "#000000")

(defn plot-2d [data labels color-fn & [jitter & options]]
  "plotting function that plots the first two dimensions of the provided data"
  (reduce plot/compose
          (cons
            (plot/list-plot (map #(take 2 %) data) :color "#ffffff")
            (for [[label indices] (group-by #(get labels %) (range (count labels)))]
              (let [points (m/select data indices [0 1])
                    color (color-fn label)
                    points (if jitter
                            (op/+ points (op/* jitter (sample (mvn [0. 0.] (m/identity-matrix 2)))))
                            (op/+ points 0.0))]
                (plot/list-plot points :color color :symbol-size 20))))))

(defn plot-pca [data labels color-fn]
  "plotting function that takes high-dimensional data and projects into 2d for visualzation"
  (let [projection (m/transpose (m/select (:V* (linalg/svd X {:return [:V*]})) [1 0] :all))
        data (m/mmul X projection)]
    (plot-2d data labels color-fn)))
    
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gmm-iris-collapsed/plot-pca</span>","value":"#'gmm-iris-collapsed/plot-pca"}
;; <=

;; **
;;; Compare the two resulting plots below. The first plots the first two dimensions of the data; the second plots the data projected onto the first two principal components.
;;; 
;;; It is clear that one of the Iris species is easily separable from the other two, while two of the varieties are less distinguishable.
;; **

;; @@
(plot-2d X y get-color 0.01)
(plot-pca X y get-color)
;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"ed9ae3ef-b795-4465-82cb-0051f22cee60","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"ed9ae3ef-b795-4465-82cb-0051f22cee60","field":"data.y"}}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"ed9ae3ef-b795-4465-82cb-0051f22cee60","values":[{"x":2.303442085013091,"y":5.912203441182305},{"x":1.9738310691095906,"y":5.572075790473948},{"x":2.0965326653811793,"y":5.446484551129698},{"x":1.8716807601609053,"y":5.436019138339218},{"x":2.329347940566786,"y":5.875065508266723},{"x":2.3255260176780155,"y":6.476990568381754},{"x":2.0715618359456913,"y":5.515428550310424},{"x":2.1494802012518353,"y":5.850423013063578},{"x":1.7764266672799258,"y":5.15851296447121},{"x":1.9919059461153845,"y":5.644581763010738},{"x":2.427279512430924,"y":6.264826797239334},{"x":2.021424173044276,"y":5.7515046520292685},{"x":1.9797238454484842,"y":5.480171123138309},{"x":2.049477957636921,"y":4.950641841217376},{"x":2.9177484137442278,"y":6.525285324956898},{"x":2.8254998850060615,"y":6.789604740791988},{"x":2.6090855838667237,"y":6.2717301448743505},{"x":2.2689662377753557,"y":5.928991376313162},{"x":2.3912620109732954,"y":6.647573945030632},{"x":2.3615432477916802,"y":6.09424297435861},{"x":2.1220328277730682,"y":6.253520516824439},{"x":2.2725784818073596,"y":6.073052106447873},{"x":2.4985750126325916,"y":5.369337853924519},{"x":1.8783669012533402,"y":6.040554867573636},{"x":1.8087545829100604,"y":5.905449908487463},{"x":1.860634354345428,"y":5.749822735683231},{"x":2.0096386203664887,"y":5.935313986700547},{"x":2.261135261796105,"y":6.038635280514736},{"x":2.2775362294593955,"y":5.949341374097886},{"x":1.883862990739648,"y":5.6004298687602505},{"x":1.8579571415689318,"y":5.637568069312068},{"x":2.1948609215292527,"y":6.184466172830855},{"x":2.622544909592193,"y":6.249720330971872},{"x":2.7991972216395675,"y":6.478522518066658},{"x":1.9919059461153845,"y":5.644581763010738},{"x":2.2531718137064356,"y":5.620520064976785},{"x":2.4886643861758544,"y":6.161355627312615},{"x":1.9919059461153845,"y":5.644581763010738},{"x":1.9018054827109898,"y":5.145176659134359},{"x":2.178063269582027,"y":5.925539746519157},{"x":2.3112730609923413,"y":5.802559536980732},{"x":1.5144898468807135,"y":4.971229452295},{"x":2.0107834603906047,"y":5.2211343507629575},{"x":1.9951758497749048,"y":6.0068686575022605},{"x":2.0435079240098535,"y":6.316291269322916},{"x":1.9107721535416642,"y":5.513746992149225},{"x":2.325129203482238,"y":6.128770145104604},{"x":1.9970597055038106,"y":5.422682923550968},{"x":2.3986964441007324,"y":6.189710063783754},{"x":2.165881039003284,"y":5.761129016098126},{"x":-0.07002183871292034,"y":9.12033952102221},{"x":-0.13421662328420436,"y":8.583796610327362},{"x":-0.3293497653228632,"y":9.126662168208902},{"x":-0.4584642674692738,"y":7.275784382326263},{"x":-0.39447931735310404,"y":8.558313005230236},{"x":-0.4833026247943437,"y":7.872487501246514},{"x":-0.28456623418526783,"y":8.66607670445322},{"x":0.024182912400109058,"y":6.45349304164636},{"x":-0.24245549047711124,"y":8.637832754509507},{"x":-0.28984369873061344,"y":7.167822099959845},{"x":-0.30696975772328405,"y":6.479324603598443},{"x":-0.17344031976074992,"y":7.9783095144331115},{"x":-0.2666101973806819,"y":7.5630258143644165},{"x":-0.49073662783778693,"y":8.330351711383713},{"x":0.18061230008847162,"y":7.373513767160237},{"x":0.002409187325539408,"y":8.703064937268552},{"x":-0.47185942019499216,"y":7.906904334684442},{"x":-0.12222126183780924,"y":7.654001575954946},{"x":-0.736272654725642,"y":8.05377441763697},{"x":-0.18106175076794212,"y":7.3419679074538164},{"x":-0.5932293764055291,"y":8.412521756552119},{"x":-0.014520841950187213,"y":7.9163793250417775},{"x":-0.8277821147258362,"y":8.44808842495339},{"x":-0.4762740179818516,"y":8.25879696504298},{"x":-0.0869522060179111,"y":8.33365415348487},{"x":-0.0806628048885385,"y":8.589969403272974},{"x":-0.41603407580165874,"y":8.869505960247778},{"x":-0.5808464739518867,"y":9.023340462542306},{"x":-0.41201593446329254,"y":8.169392826151604},{"x":0.2200456600098809,"y":7.233015080309538},{"x":-0.19324376692752704,"y":7.17755720640903},{"x":-0.0878781075126297,"y":7.109454224072083},{"x":-0.049393352508159294,"y":7.58494736181087},{"x":-0.9808089447863749,"y":8.418113585071847},{"x":-0.5290255568553752,"y":7.756670867773283},{"x":-0.1740469075952119,"y":8.376074947581255},{"x":-0.2447360861690806,"y":8.873798009014486},{"x":-0.5133590144268092,"y":8.081979389847984},{"x":-0.11934814925621118,"y":7.66806803591213},{"x":-0.3494862897896589,"y":7.351742073954862},{"x":-0.5440811208178529,"y":7.578193380382586},{"x":-0.36535789691403875,"y":8.31701546721922},{"x":-0.1747722133437492,"y":7.59828351542676},{"x":-0.0017230730654279602,"y":6.490630884013339},{"x":-0.35370485785957384,"y":7.605446588448025},{"x":-0.12717907668925305,"y":7.777711896452524},{"x":-0.2161438118497674,"y":7.756521013532204},{"x":-0.14411847897311492,"y":8.18342032838887},{"x":0.3140317107035578,"y":6.504547990271779},{"x":-0.19974305860563546,"y":7.667227077739112},{"x":-1.5164173289697638,"y":9.48426441834646},{"x":-1.1414025974734578,"y":8.318243911045275},{"x":-1.2424263310569055,"y":9.85279535677303},{"x":-1.2094826627015975,"y":9.009573158716053},{"x":-1.3775109637664595,"y":9.367567510795448},{"x":-1.5957398404194199,"y":10.587584939856649},{"x":-1.0133376187943433,"y":7.224768533778256},{"x":-1.4198810321475972,"y":10.119947011951847},{"x":-1.4548862968490481,"y":9.260755043379593},{"x":-1.1665924831795784,"y":10.325566914504607},{"x":-0.7033519559992165,"y":9.050743524848825},{"x":-1.1116840033064743,"y":8.871575004062015},{"x":-1.0446159698587718,"y":9.422184732898886},{"x":-1.2425498251132605,"y":8.132642020704218},{"x":-1.2592929354647535,"y":8.440162399747544},{"x":-0.9771424924650943,"y":9.128620918376253},{"x":-1.0269377951174667,"y":9.146470381462718},{"x":-1.2366106917959154,"y":11.034635351627747},{"x":-2.0667341913473787,"y":10.698307544122851},{"x":-1.1478881646145938,"y":8.160116418937704},{"x":-1.11778624267876,"y":9.70946512265696},{"x":-1.036776184840089,"y":8.120146734712744},{"x":-1.7125487455320771,"y":10.621271108768445},{"x":-0.8222316530729211,"y":8.574409909466574},{"x":-1.0515118870000042,"y":9.563634222836049},{"x":-1.07232757606026,"y":10.004821033677114},{"x":-0.7254361267741852,"y":8.48595657366166},{"x":-0.7159310244646228,"y":8.538112576539172},{"x":-1.338816164193835,"y":9.09707479396762},{"x":-0.9705742760084889,"y":9.792657397387398},{"x":-1.3384829178791848,"y":10.071242457852863},{"x":-0.8978232929710559,"y":10.997348167345361},{"x":-1.3732920576672805,"y":9.113862751612851},{"x":-0.8060948272420563,"y":8.664655006530971},{"x":-1.2922125987304083,"y":8.678251020385812},{"x":-1.2816591036107314,"y":10.439702080365244},{"x":-1.1438928977086986,"y":9.300194968307977},{"x":-1.0010319395637715,"y":9.109332448547137},{"x":-0.6736242857549529,"y":8.411680798379098},{"x":-0.890654170604833,"y":9.48396522218997},{"x":-1.1930276558632769,"y":9.486725319413097},{"x":-0.7469361162060589,"y":9.36359571865197},{"x":-1.1414025974734578,"y":8.318243911045275},{"x":-1.2881492631179374,"y":9.7369787232998},{"x":-1.1894152965001499,"y":9.630785973365867},{"x":-0.9294811200850096,"y":9.226698137720465},{"x":-1.0365752901674339,"y":8.566555200174923},{"x":-0.8832197407186924,"y":9.026100877924717},{"x":-0.9962205947805433,"y":9.105659829613344},{"x":-0.9148767752047281,"y":8.490509199036998}]},{"name":"015f542d-ecf1-445c-8f3a-6fc3e1813333","values":[{"x":2.303442085013091,"y":5.912203441182305},{"x":1.9738310691095906,"y":5.572075790473948},{"x":2.0965326653811793,"y":5.446484551129698},{"x":1.8716807601609053,"y":5.436019138339218},{"x":2.329347940566786,"y":5.875065508266723},{"x":2.3255260176780155,"y":6.476990568381754},{"x":2.0715618359456913,"y":5.515428550310424},{"x":2.1494802012518353,"y":5.850423013063578},{"x":1.7764266672799258,"y":5.15851296447121},{"x":1.9919059461153845,"y":5.644581763010738},{"x":2.427279512430924,"y":6.264826797239334},{"x":2.021424173044276,"y":5.7515046520292685},{"x":1.9797238454484842,"y":5.480171123138309},{"x":2.049477957636921,"y":4.950641841217376},{"x":2.9177484137442278,"y":6.525285324956898},{"x":2.8254998850060615,"y":6.789604740791988},{"x":2.6090855838667237,"y":6.2717301448743505},{"x":2.2689662377753557,"y":5.928991376313162},{"x":2.3912620109732954,"y":6.647573945030632},{"x":2.3615432477916802,"y":6.09424297435861},{"x":2.1220328277730682,"y":6.253520516824439},{"x":2.2725784818073596,"y":6.073052106447873},{"x":2.4985750126325916,"y":5.369337853924519},{"x":1.8783669012533402,"y":6.040554867573636},{"x":1.8087545829100604,"y":5.905449908487463},{"x":1.860634354345428,"y":5.749822735683231},{"x":2.0096386203664887,"y":5.935313986700547},{"x":2.261135261796105,"y":6.038635280514736},{"x":2.2775362294593955,"y":5.949341374097886},{"x":1.883862990739648,"y":5.6004298687602505},{"x":1.8579571415689318,"y":5.637568069312068},{"x":2.1948609215292527,"y":6.184466172830855},{"x":2.622544909592193,"y":6.249720330971872},{"x":2.7991972216395675,"y":6.478522518066658},{"x":1.9919059461153845,"y":5.644581763010738},{"x":2.2531718137064356,"y":5.620520064976785},{"x":2.4886643861758544,"y":6.161355627312615},{"x":1.9919059461153845,"y":5.644581763010738},{"x":1.9018054827109898,"y":5.145176659134359},{"x":2.178063269582027,"y":5.925539746519157},{"x":2.3112730609923413,"y":5.802559536980732},{"x":1.5144898468807135,"y":4.971229452295},{"x":2.0107834603906047,"y":5.2211343507629575},{"x":1.9951758497749048,"y":6.0068686575022605},{"x":2.0435079240098535,"y":6.316291269322916},{"x":1.9107721535416642,"y":5.513746992149225},{"x":2.325129203482238,"y":6.128770145104604},{"x":1.9970597055038106,"y":5.422682923550968},{"x":2.3986964441007324,"y":6.189710063783754},{"x":2.165881039003284,"y":5.761129016098126}]},{"name":"20db0ab9-e72e-4df2-a152-4b53a02830fa","values":[{"x":-0.07002183871292034,"y":9.12033952102221},{"x":-0.13421662328420436,"y":8.583796610327362},{"x":-0.3293497653228632,"y":9.126662168208902},{"x":-0.4584642674692738,"y":7.275784382326263},{"x":-0.39447931735310404,"y":8.558313005230236},{"x":-0.4833026247943437,"y":7.872487501246514},{"x":-0.28456623418526783,"y":8.66607670445322},{"x":0.024182912400109058,"y":6.45349304164636},{"x":-0.24245549047711124,"y":8.637832754509507},{"x":-0.28984369873061344,"y":7.167822099959845},{"x":-0.30696975772328405,"y":6.479324603598443},{"x":-0.17344031976074992,"y":7.9783095144331115},{"x":-0.2666101973806819,"y":7.5630258143644165},{"x":-0.49073662783778693,"y":8.330351711383713},{"x":0.18061230008847162,"y":7.373513767160237},{"x":0.002409187325539408,"y":8.703064937268552},{"x":-0.47185942019499216,"y":7.906904334684442},{"x":-0.12222126183780924,"y":7.654001575954946},{"x":-0.736272654725642,"y":8.05377441763697},{"x":-0.18106175076794212,"y":7.3419679074538164},{"x":-0.5932293764055291,"y":8.412521756552119},{"x":-0.014520841950187213,"y":7.9163793250417775},{"x":-0.8277821147258362,"y":8.44808842495339},{"x":-0.4762740179818516,"y":8.25879696504298},{"x":-0.0869522060179111,"y":8.33365415348487},{"x":-0.0806628048885385,"y":8.589969403272974},{"x":-0.41603407580165874,"y":8.869505960247778},{"x":-0.5808464739518867,"y":9.023340462542306},{"x":-0.41201593446329254,"y":8.169392826151604},{"x":0.2200456600098809,"y":7.233015080309538},{"x":-0.19324376692752704,"y":7.17755720640903},{"x":-0.0878781075126297,"y":7.109454224072083},{"x":-0.049393352508159294,"y":7.58494736181087},{"x":-0.9808089447863749,"y":8.418113585071847},{"x":-0.5290255568553752,"y":7.756670867773283},{"x":-0.1740469075952119,"y":8.376074947581255},{"x":-0.2447360861690806,"y":8.873798009014486},{"x":-0.5133590144268092,"y":8.081979389847984},{"x":-0.11934814925621118,"y":7.66806803591213},{"x":-0.3494862897896589,"y":7.351742073954862},{"x":-0.5440811208178529,"y":7.578193380382586},{"x":-0.36535789691403875,"y":8.31701546721922},{"x":-0.1747722133437492,"y":7.59828351542676},{"x":-0.0017230730654279602,"y":6.490630884013339},{"x":-0.35370485785957384,"y":7.605446588448025},{"x":-0.12717907668925305,"y":7.777711896452524},{"x":-0.2161438118497674,"y":7.756521013532204},{"x":-0.14411847897311492,"y":8.18342032838887},{"x":0.3140317107035578,"y":6.504547990271779},{"x":-0.19974305860563546,"y":7.667227077739112}]},{"name":"7d4fa41a-09d2-46d3-862e-8645403dae7a","values":[{"x":-1.5164173289697638,"y":9.48426441834646},{"x":-1.1414025974734578,"y":8.318243911045275},{"x":-1.2424263310569055,"y":9.85279535677303},{"x":-1.2094826627015975,"y":9.009573158716053},{"x":-1.3775109637664595,"y":9.367567510795448},{"x":-1.5957398404194199,"y":10.587584939856649},{"x":-1.0133376187943433,"y":7.224768533778256},{"x":-1.4198810321475972,"y":10.119947011951847},{"x":-1.4548862968490481,"y":9.260755043379593},{"x":-1.1665924831795784,"y":10.325566914504607},{"x":-0.7033519559992165,"y":9.050743524848825},{"x":-1.1116840033064743,"y":8.871575004062015},{"x":-1.0446159698587718,"y":9.422184732898886},{"x":-1.2425498251132605,"y":8.132642020704218},{"x":-1.2592929354647535,"y":8.440162399747544},{"x":-0.9771424924650943,"y":9.128620918376253},{"x":-1.0269377951174667,"y":9.146470381462718},{"x":-1.2366106917959154,"y":11.034635351627747},{"x":-2.0667341913473787,"y":10.698307544122851},{"x":-1.1478881646145938,"y":8.160116418937704},{"x":-1.11778624267876,"y":9.70946512265696},{"x":-1.036776184840089,"y":8.120146734712744},{"x":-1.7125487455320771,"y":10.621271108768445},{"x":-0.8222316530729211,"y":8.574409909466574},{"x":-1.0515118870000042,"y":9.563634222836049},{"x":-1.07232757606026,"y":10.004821033677114},{"x":-0.7254361267741852,"y":8.48595657366166},{"x":-0.7159310244646228,"y":8.538112576539172},{"x":-1.338816164193835,"y":9.09707479396762},{"x":-0.9705742760084889,"y":9.792657397387398},{"x":-1.3384829178791848,"y":10.071242457852863},{"x":-0.8978232929710559,"y":10.997348167345361},{"x":-1.3732920576672805,"y":9.113862751612851},{"x":-0.8060948272420563,"y":8.664655006530971},{"x":-1.2922125987304083,"y":8.678251020385812},{"x":-1.2816591036107314,"y":10.439702080365244},{"x":-1.1438928977086986,"y":9.300194968307977},{"x":-1.0010319395637715,"y":9.109332448547137},{"x":-0.6736242857549529,"y":8.411680798379098},{"x":-0.890654170604833,"y":9.48396522218997},{"x":-1.1930276558632769,"y":9.486725319413097},{"x":-0.7469361162060589,"y":9.36359571865197},{"x":-1.1414025974734578,"y":8.318243911045275},{"x":-1.2881492631179374,"y":9.7369787232998},{"x":-1.1894152965001499,"y":9.630785973365867},{"x":-0.9294811200850096,"y":9.226698137720465},{"x":-1.0365752901674339,"y":8.566555200174923},{"x":-0.8832197407186924,"y":9.026100877924717},{"x":-0.9962205947805433,"y":9.105659829613344},{"x":-0.9148767752047281,"y":8.490509199036998}]}],"marks":[{"type":"symbol","from":{"data":"ed9ae3ef-b795-4465-82cb-0051f22cee60"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"#ffffff"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}},{"type":"symbol","from":{"data":"015f542d-ecf1-445c-8f3a-6fc3e1813333"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"#34C6F2"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":20},"stroke":{"value":"transparent"}},"hover":{"size":{"value":60},"stroke":{"value":"white"}}}},{"type":"symbol","from":{"data":"20db0ab9-e72e-4df2-a152-4b53a02830fa"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"#F13F6F"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":20},"stroke":{"value":"transparent"}},"hover":{"size":{"value":60},"stroke":{"value":"white"}}}},{"type":"symbol","from":{"data":"7d4fa41a-09d2-46d3-862e-8645403dae7a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"#64F54A"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":20},"stroke":{"value":"transparent"}},"hover":{"size":{"value":60},"stroke":{"value":"white"}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"ed9ae3ef-b795-4465-82cb-0051f22cee60\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"ed9ae3ef-b795-4465-82cb-0051f22cee60\", :field \"data.y\"}}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"ed9ae3ef-b795-4465-82cb-0051f22cee60\", :values ({:x 2.303442085013091, :y 5.912203441182305} {:x 1.9738310691095906, :y 5.572075790473948} {:x 2.0965326653811793, :y 5.446484551129698} {:x 1.8716807601609053, :y 5.436019138339218} {:x 2.329347940566786, :y 5.875065508266723} {:x 2.3255260176780155, :y 6.476990568381754} {:x 2.0715618359456913, :y 5.515428550310424} {:x 2.1494802012518353, :y 5.850423013063578} {:x 1.7764266672799258, :y 5.15851296447121} {:x 1.9919059461153845, :y 5.644581763010738} {:x 2.427279512430924, :y 6.264826797239334} {:x 2.021424173044276, :y 5.7515046520292685} {:x 1.9797238454484842, :y 5.480171123138309} {:x 2.049477957636921, :y 4.950641841217376} {:x 2.9177484137442278, :y 6.525285324956898} {:x 2.8254998850060615, :y 6.789604740791988} {:x 2.6090855838667237, :y 6.2717301448743505} {:x 2.2689662377753557, :y 5.928991376313162} {:x 2.3912620109732954, :y 6.647573945030632} {:x 2.3615432477916802, :y 6.09424297435861} {:x 2.1220328277730682, :y 6.253520516824439} {:x 2.2725784818073596, :y 6.073052106447873} {:x 2.4985750126325916, :y 5.369337853924519} {:x 1.8783669012533402, :y 6.040554867573636} {:x 1.8087545829100604, :y 5.905449908487463} {:x 1.860634354345428, :y 5.749822735683231} {:x 2.0096386203664887, :y 5.935313986700547} {:x 2.261135261796105, :y 6.038635280514736} {:x 2.2775362294593955, :y 5.949341374097886} {:x 1.883862990739648, :y 5.6004298687602505} {:x 1.8579571415689318, :y 5.637568069312068} {:x 2.1948609215292527, :y 6.184466172830855} {:x 2.622544909592193, :y 6.249720330971872} {:x 2.7991972216395675, :y 6.478522518066658} {:x 1.9919059461153845, :y 5.644581763010738} {:x 2.2531718137064356, :y 5.620520064976785} {:x 2.4886643861758544, :y 6.161355627312615} {:x 1.9919059461153845, :y 5.644581763010738} {:x 1.9018054827109898, :y 5.145176659134359} {:x 2.178063269582027, :y 5.925539746519157} {:x 2.3112730609923413, :y 5.802559536980732} {:x 1.5144898468807135, :y 4.971229452295} {:x 2.0107834603906047, :y 5.2211343507629575} {:x 1.9951758497749048, :y 6.0068686575022605} {:x 2.0435079240098535, :y 6.316291269322916} {:x 1.9107721535416642, :y 5.513746992149225} {:x 2.325129203482238, :y 6.128770145104604} {:x 1.9970597055038106, :y 5.422682923550968} {:x 2.3986964441007324, :y 6.189710063783754} {:x 2.165881039003284, :y 5.761129016098126} {:x -0.07002183871292034, :y 9.12033952102221} {:x -0.13421662328420436, :y 8.583796610327362} {:x -0.3293497653228632, :y 9.126662168208902} {:x -0.4584642674692738, :y 7.275784382326263} {:x -0.39447931735310404, :y 8.558313005230236} {:x -0.4833026247943437, :y 7.872487501246514} {:x -0.28456623418526783, :y 8.66607670445322} {:x 0.024182912400109058, :y 6.45349304164636} {:x -0.24245549047711124, :y 8.637832754509507} {:x -0.28984369873061344, :y 7.167822099959845} {:x -0.30696975772328405, :y 6.479324603598443} {:x -0.17344031976074992, :y 7.9783095144331115} {:x -0.2666101973806819, :y 7.5630258143644165} {:x -0.49073662783778693, :y 8.330351711383713} {:x 0.18061230008847162, :y 7.373513767160237} {:x 0.002409187325539408, :y 8.703064937268552} {:x -0.47185942019499216, :y 7.906904334684442} {:x -0.12222126183780924, :y 7.654001575954946} {:x -0.736272654725642, :y 8.05377441763697} {:x -0.18106175076794212, :y 7.3419679074538164} {:x -0.5932293764055291, :y 8.412521756552119} {:x -0.014520841950187213, :y 7.9163793250417775} {:x -0.8277821147258362, :y 8.44808842495339} {:x -0.4762740179818516, :y 8.25879696504298} {:x -0.0869522060179111, :y 8.33365415348487} {:x -0.0806628048885385, :y 8.589969403272974} {:x -0.41603407580165874, :y 8.869505960247778} {:x -0.5808464739518867, :y 9.023340462542306} {:x -0.41201593446329254, :y 8.169392826151604} {:x 0.2200456600098809, :y 7.233015080309538} {:x -0.19324376692752704, :y 7.17755720640903} {:x -0.0878781075126297, :y 7.109454224072083} {:x -0.049393352508159294, :y 7.58494736181087} {:x -0.9808089447863749, :y 8.418113585071847} {:x -0.5290255568553752, :y 7.756670867773283} {:x -0.1740469075952119, :y 8.376074947581255} {:x -0.2447360861690806, :y 8.873798009014486} {:x -0.5133590144268092, :y 8.081979389847984} {:x -0.11934814925621118, :y 7.66806803591213} {:x -0.3494862897896589, :y 7.351742073954862} {:x -0.5440811208178529, :y 7.578193380382586} {:x -0.36535789691403875, :y 8.31701546721922} {:x -0.1747722133437492, :y 7.59828351542676} {:x -0.0017230730654279602, :y 6.490630884013339} {:x -0.35370485785957384, :y 7.605446588448025} {:x -0.12717907668925305, :y 7.777711896452524} {:x -0.2161438118497674, :y 7.756521013532204} {:x -0.14411847897311492, :y 8.18342032838887} {:x 0.3140317107035578, :y 6.504547990271779} {:x -0.19974305860563546, :y 7.667227077739112} {:x -1.5164173289697638, :y 9.48426441834646} {:x -1.1414025974734578, :y 8.318243911045275} {:x -1.2424263310569055, :y 9.85279535677303} {:x -1.2094826627015975, :y 9.009573158716053} {:x -1.3775109637664595, :y 9.367567510795448} {:x -1.5957398404194199, :y 10.587584939856649} {:x -1.0133376187943433, :y 7.224768533778256} {:x -1.4198810321475972, :y 10.119947011951847} {:x -1.4548862968490481, :y 9.260755043379593} {:x -1.1665924831795784, :y 10.325566914504607} {:x -0.7033519559992165, :y 9.050743524848825} {:x -1.1116840033064743, :y 8.871575004062015} {:x -1.0446159698587718, :y 9.422184732898886} {:x -1.2425498251132605, :y 8.132642020704218} {:x -1.2592929354647535, :y 8.440162399747544} {:x -0.9771424924650943, :y 9.128620918376253} {:x -1.0269377951174667, :y 9.146470381462718} {:x -1.2366106917959154, :y 11.034635351627747} {:x -2.0667341913473787, :y 10.698307544122851} {:x -1.1478881646145938, :y 8.160116418937704} {:x -1.11778624267876, :y 9.70946512265696} {:x -1.036776184840089, :y 8.120146734712744} {:x -1.7125487455320771, :y 10.621271108768445} {:x -0.8222316530729211, :y 8.574409909466574} {:x -1.0515118870000042, :y 9.563634222836049} {:x -1.07232757606026, :y 10.004821033677114} {:x -0.7254361267741852, :y 8.48595657366166} {:x -0.7159310244646228, :y 8.538112576539172} {:x -1.338816164193835, :y 9.09707479396762} {:x -0.9705742760084889, :y 9.792657397387398} {:x -1.3384829178791848, :y 10.071242457852863} {:x -0.8978232929710559, :y 10.997348167345361} {:x -1.3732920576672805, :y 9.113862751612851} {:x -0.8060948272420563, :y 8.664655006530971} {:x -1.2922125987304083, :y 8.678251020385812} {:x -1.2816591036107314, :y 10.439702080365244} {:x -1.1438928977086986, :y 9.300194968307977} {:x -1.0010319395637715, :y 9.109332448547137} {:x -0.6736242857549529, :y 8.411680798379098} {:x -0.890654170604833, :y 9.48396522218997} {:x -1.1930276558632769, :y 9.486725319413097} {:x -0.7469361162060589, :y 9.36359571865197} {:x -1.1414025974734578, :y 8.318243911045275} {:x -1.2881492631179374, :y 9.7369787232998} {:x -1.1894152965001499, :y 9.630785973365867} {:x -0.9294811200850096, :y 9.226698137720465} {:x -1.0365752901674339, :y 8.566555200174923} {:x -0.8832197407186924, :y 9.026100877924717} {:x -0.9962205947805433, :y 9.105659829613344} {:x -0.9148767752047281, :y 8.490509199036998})} {:name \"015f542d-ecf1-445c-8f3a-6fc3e1813333\", :values ({:x 2.303442085013091, :y 5.912203441182305} {:x 1.9738310691095906, :y 5.572075790473948} {:x 2.0965326653811793, :y 5.446484551129698} {:x 1.8716807601609053, :y 5.436019138339218} {:x 2.329347940566786, :y 5.875065508266723} {:x 2.3255260176780155, :y 6.476990568381754} {:x 2.0715618359456913, :y 5.515428550310424} {:x 2.1494802012518353, :y 5.850423013063578} {:x 1.7764266672799258, :y 5.15851296447121} {:x 1.9919059461153845, :y 5.644581763010738} {:x 2.427279512430924, :y 6.264826797239334} {:x 2.021424173044276, :y 5.7515046520292685} {:x 1.9797238454484842, :y 5.480171123138309} {:x 2.049477957636921, :y 4.950641841217376} {:x 2.9177484137442278, :y 6.525285324956898} {:x 2.8254998850060615, :y 6.789604740791988} {:x 2.6090855838667237, :y 6.2717301448743505} {:x 2.2689662377753557, :y 5.928991376313162} {:x 2.3912620109732954, :y 6.647573945030632} {:x 2.3615432477916802, :y 6.09424297435861} {:x 2.1220328277730682, :y 6.253520516824439} {:x 2.2725784818073596, :y 6.073052106447873} {:x 2.4985750126325916, :y 5.369337853924519} {:x 1.8783669012533402, :y 6.040554867573636} {:x 1.8087545829100604, :y 5.905449908487463} {:x 1.860634354345428, :y 5.749822735683231} {:x 2.0096386203664887, :y 5.935313986700547} {:x 2.261135261796105, :y 6.038635280514736} {:x 2.2775362294593955, :y 5.949341374097886} {:x 1.883862990739648, :y 5.6004298687602505} {:x 1.8579571415689318, :y 5.637568069312068} {:x 2.1948609215292527, :y 6.184466172830855} {:x 2.622544909592193, :y 6.249720330971872} {:x 2.7991972216395675, :y 6.478522518066658} {:x 1.9919059461153845, :y 5.644581763010738} {:x 2.2531718137064356, :y 5.620520064976785} {:x 2.4886643861758544, :y 6.161355627312615} {:x 1.9919059461153845, :y 5.644581763010738} {:x 1.9018054827109898, :y 5.145176659134359} {:x 2.178063269582027, :y 5.925539746519157} {:x 2.3112730609923413, :y 5.802559536980732} {:x 1.5144898468807135, :y 4.971229452295} {:x 2.0107834603906047, :y 5.2211343507629575} {:x 1.9951758497749048, :y 6.0068686575022605} {:x 2.0435079240098535, :y 6.316291269322916} {:x 1.9107721535416642, :y 5.513746992149225} {:x 2.325129203482238, :y 6.128770145104604} {:x 1.9970597055038106, :y 5.422682923550968} {:x 2.3986964441007324, :y 6.189710063783754} {:x 2.165881039003284, :y 5.761129016098126})} {:name \"20db0ab9-e72e-4df2-a152-4b53a02830fa\", :values ({:x -0.07002183871292034, :y 9.12033952102221} {:x -0.13421662328420436, :y 8.583796610327362} {:x -0.3293497653228632, :y 9.126662168208902} {:x -0.4584642674692738, :y 7.275784382326263} {:x -0.39447931735310404, :y 8.558313005230236} {:x -0.4833026247943437, :y 7.872487501246514} {:x -0.28456623418526783, :y 8.66607670445322} {:x 0.024182912400109058, :y 6.45349304164636} {:x -0.24245549047711124, :y 8.637832754509507} {:x -0.28984369873061344, :y 7.167822099959845} {:x -0.30696975772328405, :y 6.479324603598443} {:x -0.17344031976074992, :y 7.9783095144331115} {:x -0.2666101973806819, :y 7.5630258143644165} {:x -0.49073662783778693, :y 8.330351711383713} {:x 0.18061230008847162, :y 7.373513767160237} {:x 0.002409187325539408, :y 8.703064937268552} {:x -0.47185942019499216, :y 7.906904334684442} {:x -0.12222126183780924, :y 7.654001575954946} {:x -0.736272654725642, :y 8.05377441763697} {:x -0.18106175076794212, :y 7.3419679074538164} {:x -0.5932293764055291, :y 8.412521756552119} {:x -0.014520841950187213, :y 7.9163793250417775} {:x -0.8277821147258362, :y 8.44808842495339} {:x -0.4762740179818516, :y 8.25879696504298} {:x -0.0869522060179111, :y 8.33365415348487} {:x -0.0806628048885385, :y 8.589969403272974} {:x -0.41603407580165874, :y 8.869505960247778} {:x -0.5808464739518867, :y 9.023340462542306} {:x -0.41201593446329254, :y 8.169392826151604} {:x 0.2200456600098809, :y 7.233015080309538} {:x -0.19324376692752704, :y 7.17755720640903} {:x -0.0878781075126297, :y 7.109454224072083} {:x -0.049393352508159294, :y 7.58494736181087} {:x -0.9808089447863749, :y 8.418113585071847} {:x -0.5290255568553752, :y 7.756670867773283} {:x -0.1740469075952119, :y 8.376074947581255} {:x -0.2447360861690806, :y 8.873798009014486} {:x -0.5133590144268092, :y 8.081979389847984} {:x -0.11934814925621118, :y 7.66806803591213} {:x -0.3494862897896589, :y 7.351742073954862} {:x -0.5440811208178529, :y 7.578193380382586} {:x -0.36535789691403875, :y 8.31701546721922} {:x -0.1747722133437492, :y 7.59828351542676} {:x -0.0017230730654279602, :y 6.490630884013339} {:x -0.35370485785957384, :y 7.605446588448025} {:x -0.12717907668925305, :y 7.777711896452524} {:x -0.2161438118497674, :y 7.756521013532204} {:x -0.14411847897311492, :y 8.18342032838887} {:x 0.3140317107035578, :y 6.504547990271779} {:x -0.19974305860563546, :y 7.667227077739112})} {:name \"7d4fa41a-09d2-46d3-862e-8645403dae7a\", :values ({:x -1.5164173289697638, :y 9.48426441834646} {:x -1.1414025974734578, :y 8.318243911045275} {:x -1.2424263310569055, :y 9.85279535677303} {:x -1.2094826627015975, :y 9.009573158716053} {:x -1.3775109637664595, :y 9.367567510795448} {:x -1.5957398404194199, :y 10.587584939856649} {:x -1.0133376187943433, :y 7.224768533778256} {:x -1.4198810321475972, :y 10.119947011951847} {:x -1.4548862968490481, :y 9.260755043379593} {:x -1.1665924831795784, :y 10.325566914504607} {:x -0.7033519559992165, :y 9.050743524848825} {:x -1.1116840033064743, :y 8.871575004062015} {:x -1.0446159698587718, :y 9.422184732898886} {:x -1.2425498251132605, :y 8.132642020704218} {:x -1.2592929354647535, :y 8.440162399747544} {:x -0.9771424924650943, :y 9.128620918376253} {:x -1.0269377951174667, :y 9.146470381462718} {:x -1.2366106917959154, :y 11.034635351627747} {:x -2.0667341913473787, :y 10.698307544122851} {:x -1.1478881646145938, :y 8.160116418937704} {:x -1.11778624267876, :y 9.70946512265696} {:x -1.036776184840089, :y 8.120146734712744} {:x -1.7125487455320771, :y 10.621271108768445} {:x -0.8222316530729211, :y 8.574409909466574} {:x -1.0515118870000042, :y 9.563634222836049} {:x -1.07232757606026, :y 10.004821033677114} {:x -0.7254361267741852, :y 8.48595657366166} {:x -0.7159310244646228, :y 8.538112576539172} {:x -1.338816164193835, :y 9.09707479396762} {:x -0.9705742760084889, :y 9.792657397387398} {:x -1.3384829178791848, :y 10.071242457852863} {:x -0.8978232929710559, :y 10.997348167345361} {:x -1.3732920576672805, :y 9.113862751612851} {:x -0.8060948272420563, :y 8.664655006530971} {:x -1.2922125987304083, :y 8.678251020385812} {:x -1.2816591036107314, :y 10.439702080365244} {:x -1.1438928977086986, :y 9.300194968307977} {:x -1.0010319395637715, :y 9.109332448547137} {:x -0.6736242857549529, :y 8.411680798379098} {:x -0.890654170604833, :y 9.48396522218997} {:x -1.1930276558632769, :y 9.486725319413097} {:x -0.7469361162060589, :y 9.36359571865197} {:x -1.1414025974734578, :y 8.318243911045275} {:x -1.2881492631179374, :y 9.7369787232998} {:x -1.1894152965001499, :y 9.630785973365867} {:x -0.9294811200850096, :y 9.226698137720465} {:x -1.0365752901674339, :y 8.566555200174923} {:x -0.8832197407186924, :y 9.026100877924717} {:x -0.9962205947805433, :y 9.105659829613344} {:x -0.9148767752047281, :y 8.490509199036998})}), :marks ({:type \"symbol\", :from {:data \"ed9ae3ef-b795-4465-82cb-0051f22cee60\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"#ffffff\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"015f542d-ecf1-445c-8f3a-6fc3e1813333\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"#34C6F2\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 20}, :stroke {:value \"transparent\"}}, :hover {:size {:value 60}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"20db0ab9-e72e-4df2-a152-4b53a02830fa\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"#F13F6F\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 20}, :stroke {:value \"transparent\"}}, :hover {:size {:value 60}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"7d4fa41a-09d2-46d3-862e-8645403dae7a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"#64F54A\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 20}, :stroke {:value \"transparent\"}}, :hover {:size {:value 60}, :stroke {:value \"white\"}}}})}}"}
;; <=

;; **
;;; ## Unsupervised learning
;;; 
;;; In the plots above, we see the Iris data colored using the *true labels* given by @@y@@.
;;; One typical machine larning task would involve learning a classifier, which would allow us to predict the Iris variety of a particular flower (i.e., @@y_n@@) given only its measurements @@\mathbf{x}_n@@.
;;; 
;;; As alternative, we could consider an *unsupervised learning* task, where we suppose that the true Iris species labels were unknown. 
;;; 
;;; 
;; **

;; @@
(plot-pca X y black)
;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"2f77fd0c-427d-4930-815c-732c4b23071d","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"2f77fd0c-427d-4930-815c-732c4b23071d","field":"data.y"}}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"2f77fd0c-427d-4930-815c-732c4b23071d","values":[{"x":2.303442085013091,"y":5.912203441182305},{"x":1.9738310691095906,"y":5.572075790473948},{"x":2.0965326653811793,"y":5.446484551129698},{"x":1.8716807601609053,"y":5.436019138339218},{"x":2.329347940566786,"y":5.875065508266723},{"x":2.3255260176780155,"y":6.476990568381754},{"x":2.0715618359456913,"y":5.515428550310424},{"x":2.1494802012518353,"y":5.850423013063578},{"x":1.7764266672799258,"y":5.15851296447121},{"x":1.9919059461153845,"y":5.644581763010738},{"x":2.427279512430924,"y":6.264826797239334},{"x":2.021424173044276,"y":5.7515046520292685},{"x":1.9797238454484842,"y":5.480171123138309},{"x":2.049477957636921,"y":4.950641841217376},{"x":2.9177484137442278,"y":6.525285324956898},{"x":2.8254998850060615,"y":6.789604740791988},{"x":2.6090855838667237,"y":6.2717301448743505},{"x":2.2689662377753557,"y":5.928991376313162},{"x":2.3912620109732954,"y":6.647573945030632},{"x":2.3615432477916802,"y":6.09424297435861},{"x":2.1220328277730682,"y":6.253520516824439},{"x":2.2725784818073596,"y":6.073052106447873},{"x":2.4985750126325916,"y":5.369337853924519},{"x":1.8783669012533402,"y":6.040554867573636},{"x":1.8087545829100604,"y":5.905449908487463},{"x":1.860634354345428,"y":5.749822735683231},{"x":2.0096386203664887,"y":5.935313986700547},{"x":2.261135261796105,"y":6.038635280514736},{"x":2.2775362294593955,"y":5.949341374097886},{"x":1.883862990739648,"y":5.6004298687602505},{"x":1.8579571415689318,"y":5.637568069312068},{"x":2.1948609215292527,"y":6.184466172830855},{"x":2.622544909592193,"y":6.249720330971872},{"x":2.7991972216395675,"y":6.478522518066658},{"x":1.9919059461153845,"y":5.644581763010738},{"x":2.2531718137064356,"y":5.620520064976785},{"x":2.4886643861758544,"y":6.161355627312615},{"x":1.9919059461153845,"y":5.644581763010738},{"x":1.9018054827109898,"y":5.145176659134359},{"x":2.178063269582027,"y":5.925539746519157},{"x":2.3112730609923413,"y":5.802559536980732},{"x":1.5144898468807135,"y":4.971229452295},{"x":2.0107834603906047,"y":5.2211343507629575},{"x":1.9951758497749048,"y":6.0068686575022605},{"x":2.0435079240098535,"y":6.316291269322916},{"x":1.9107721535416642,"y":5.513746992149225},{"x":2.325129203482238,"y":6.128770145104604},{"x":1.9970597055038106,"y":5.422682923550968},{"x":2.3986964441007324,"y":6.189710063783754},{"x":2.165881039003284,"y":5.761129016098126},{"x":-0.07002183871292034,"y":9.12033952102221},{"x":-0.13421662328420436,"y":8.583796610327362},{"x":-0.3293497653228632,"y":9.126662168208902},{"x":-0.4584642674692738,"y":7.275784382326263},{"x":-0.39447931735310404,"y":8.558313005230236},{"x":-0.4833026247943437,"y":7.872487501246514},{"x":-0.28456623418526783,"y":8.66607670445322},{"x":0.024182912400109058,"y":6.45349304164636},{"x":-0.24245549047711124,"y":8.637832754509507},{"x":-0.28984369873061344,"y":7.167822099959845},{"x":-0.30696975772328405,"y":6.479324603598443},{"x":-0.17344031976074992,"y":7.9783095144331115},{"x":-0.2666101973806819,"y":7.5630258143644165},{"x":-0.49073662783778693,"y":8.330351711383713},{"x":0.18061230008847162,"y":7.373513767160237},{"x":0.002409187325539408,"y":8.703064937268552},{"x":-0.47185942019499216,"y":7.906904334684442},{"x":-0.12222126183780924,"y":7.654001575954946},{"x":-0.736272654725642,"y":8.05377441763697},{"x":-0.18106175076794212,"y":7.3419679074538164},{"x":-0.5932293764055291,"y":8.412521756552119},{"x":-0.014520841950187213,"y":7.9163793250417775},{"x":-0.8277821147258362,"y":8.44808842495339},{"x":-0.4762740179818516,"y":8.25879696504298},{"x":-0.0869522060179111,"y":8.33365415348487},{"x":-0.0806628048885385,"y":8.589969403272974},{"x":-0.41603407580165874,"y":8.869505960247778},{"x":-0.5808464739518867,"y":9.023340462542306},{"x":-0.41201593446329254,"y":8.169392826151604},{"x":0.2200456600098809,"y":7.233015080309538},{"x":-0.19324376692752704,"y":7.17755720640903},{"x":-0.0878781075126297,"y":7.109454224072083},{"x":-0.049393352508159294,"y":7.58494736181087},{"x":-0.9808089447863749,"y":8.418113585071847},{"x":-0.5290255568553752,"y":7.756670867773283},{"x":-0.1740469075952119,"y":8.376074947581255},{"x":-0.2447360861690806,"y":8.873798009014486},{"x":-0.5133590144268092,"y":8.081979389847984},{"x":-0.11934814925621118,"y":7.66806803591213},{"x":-0.3494862897896589,"y":7.351742073954862},{"x":-0.5440811208178529,"y":7.578193380382586},{"x":-0.36535789691403875,"y":8.31701546721922},{"x":-0.1747722133437492,"y":7.59828351542676},{"x":-0.0017230730654279602,"y":6.490630884013339},{"x":-0.35370485785957384,"y":7.605446588448025},{"x":-0.12717907668925305,"y":7.777711896452524},{"x":-0.2161438118497674,"y":7.756521013532204},{"x":-0.14411847897311492,"y":8.18342032838887},{"x":0.3140317107035578,"y":6.504547990271779},{"x":-0.19974305860563546,"y":7.667227077739112},{"x":-1.5164173289697638,"y":9.48426441834646},{"x":-1.1414025974734578,"y":8.318243911045275},{"x":-1.2424263310569055,"y":9.85279535677303},{"x":-1.2094826627015975,"y":9.009573158716053},{"x":-1.3775109637664595,"y":9.367567510795448},{"x":-1.5957398404194199,"y":10.587584939856649},{"x":-1.0133376187943433,"y":7.224768533778256},{"x":-1.4198810321475972,"y":10.119947011951847},{"x":-1.4548862968490481,"y":9.260755043379593},{"x":-1.1665924831795784,"y":10.325566914504607},{"x":-0.7033519559992165,"y":9.050743524848825},{"x":-1.1116840033064743,"y":8.871575004062015},{"x":-1.0446159698587718,"y":9.422184732898886},{"x":-1.2425498251132605,"y":8.132642020704218},{"x":-1.2592929354647535,"y":8.440162399747544},{"x":-0.9771424924650943,"y":9.128620918376253},{"x":-1.0269377951174667,"y":9.146470381462718},{"x":-1.2366106917959154,"y":11.034635351627747},{"x":-2.0667341913473787,"y":10.698307544122851},{"x":-1.1478881646145938,"y":8.160116418937704},{"x":-1.11778624267876,"y":9.70946512265696},{"x":-1.036776184840089,"y":8.120146734712744},{"x":-1.7125487455320771,"y":10.621271108768445},{"x":-0.8222316530729211,"y":8.574409909466574},{"x":-1.0515118870000042,"y":9.563634222836049},{"x":-1.07232757606026,"y":10.004821033677114},{"x":-0.7254361267741852,"y":8.48595657366166},{"x":-0.7159310244646228,"y":8.538112576539172},{"x":-1.338816164193835,"y":9.09707479396762},{"x":-0.9705742760084889,"y":9.792657397387398},{"x":-1.3384829178791848,"y":10.071242457852863},{"x":-0.8978232929710559,"y":10.997348167345361},{"x":-1.3732920576672805,"y":9.113862751612851},{"x":-0.8060948272420563,"y":8.664655006530971},{"x":-1.2922125987304083,"y":8.678251020385812},{"x":-1.2816591036107314,"y":10.439702080365244},{"x":-1.1438928977086986,"y":9.300194968307977},{"x":-1.0010319395637715,"y":9.109332448547137},{"x":-0.6736242857549529,"y":8.411680798379098},{"x":-0.890654170604833,"y":9.48396522218997},{"x":-1.1930276558632769,"y":9.486725319413097},{"x":-0.7469361162060589,"y":9.36359571865197},{"x":-1.1414025974734578,"y":8.318243911045275},{"x":-1.2881492631179374,"y":9.7369787232998},{"x":-1.1894152965001499,"y":9.630785973365867},{"x":-0.9294811200850096,"y":9.226698137720465},{"x":-1.0365752901674339,"y":8.566555200174923},{"x":-0.8832197407186924,"y":9.026100877924717},{"x":-0.9962205947805433,"y":9.105659829613344},{"x":-0.9148767752047281,"y":8.490509199036998}]},{"name":"89767225-3444-4b25-b615-2e24b4538039","values":[{"x":2.303442085013091,"y":5.912203441182305},{"x":1.9738310691095906,"y":5.572075790473948},{"x":2.0965326653811793,"y":5.446484551129698},{"x":1.8716807601609053,"y":5.436019138339218},{"x":2.329347940566786,"y":5.875065508266723},{"x":2.3255260176780155,"y":6.476990568381754},{"x":2.0715618359456913,"y":5.515428550310424},{"x":2.1494802012518353,"y":5.850423013063578},{"x":1.7764266672799258,"y":5.15851296447121},{"x":1.9919059461153845,"y":5.644581763010738},{"x":2.427279512430924,"y":6.264826797239334},{"x":2.021424173044276,"y":5.7515046520292685},{"x":1.9797238454484842,"y":5.480171123138309},{"x":2.049477957636921,"y":4.950641841217376},{"x":2.9177484137442278,"y":6.525285324956898},{"x":2.8254998850060615,"y":6.789604740791988},{"x":2.6090855838667237,"y":6.2717301448743505},{"x":2.2689662377753557,"y":5.928991376313162},{"x":2.3912620109732954,"y":6.647573945030632},{"x":2.3615432477916802,"y":6.09424297435861},{"x":2.1220328277730682,"y":6.253520516824439},{"x":2.2725784818073596,"y":6.073052106447873},{"x":2.4985750126325916,"y":5.369337853924519},{"x":1.8783669012533402,"y":6.040554867573636},{"x":1.8087545829100604,"y":5.905449908487463},{"x":1.860634354345428,"y":5.749822735683231},{"x":2.0096386203664887,"y":5.935313986700547},{"x":2.261135261796105,"y":6.038635280514736},{"x":2.2775362294593955,"y":5.949341374097886},{"x":1.883862990739648,"y":5.6004298687602505},{"x":1.8579571415689318,"y":5.637568069312068},{"x":2.1948609215292527,"y":6.184466172830855},{"x":2.622544909592193,"y":6.249720330971872},{"x":2.7991972216395675,"y":6.478522518066658},{"x":1.9919059461153845,"y":5.644581763010738},{"x":2.2531718137064356,"y":5.620520064976785},{"x":2.4886643861758544,"y":6.161355627312615},{"x":1.9919059461153845,"y":5.644581763010738},{"x":1.9018054827109898,"y":5.145176659134359},{"x":2.178063269582027,"y":5.925539746519157},{"x":2.3112730609923413,"y":5.802559536980732},{"x":1.5144898468807135,"y":4.971229452295},{"x":2.0107834603906047,"y":5.2211343507629575},{"x":1.9951758497749048,"y":6.0068686575022605},{"x":2.0435079240098535,"y":6.316291269322916},{"x":1.9107721535416642,"y":5.513746992149225},{"x":2.325129203482238,"y":6.128770145104604},{"x":1.9970597055038106,"y":5.422682923550968},{"x":2.3986964441007324,"y":6.189710063783754},{"x":2.165881039003284,"y":5.761129016098126}]},{"name":"bff5ed1a-4e85-43ba-bed3-0cdd04af33c2","values":[{"x":-0.07002183871292034,"y":9.12033952102221},{"x":-0.13421662328420436,"y":8.583796610327362},{"x":-0.3293497653228632,"y":9.126662168208902},{"x":-0.4584642674692738,"y":7.275784382326263},{"x":-0.39447931735310404,"y":8.558313005230236},{"x":-0.4833026247943437,"y":7.872487501246514},{"x":-0.28456623418526783,"y":8.66607670445322},{"x":0.024182912400109058,"y":6.45349304164636},{"x":-0.24245549047711124,"y":8.637832754509507},{"x":-0.28984369873061344,"y":7.167822099959845},{"x":-0.30696975772328405,"y":6.479324603598443},{"x":-0.17344031976074992,"y":7.9783095144331115},{"x":-0.2666101973806819,"y":7.5630258143644165},{"x":-0.49073662783778693,"y":8.330351711383713},{"x":0.18061230008847162,"y":7.373513767160237},{"x":0.002409187325539408,"y":8.703064937268552},{"x":-0.47185942019499216,"y":7.906904334684442},{"x":-0.12222126183780924,"y":7.654001575954946},{"x":-0.736272654725642,"y":8.05377441763697},{"x":-0.18106175076794212,"y":7.3419679074538164},{"x":-0.5932293764055291,"y":8.412521756552119},{"x":-0.014520841950187213,"y":7.9163793250417775},{"x":-0.8277821147258362,"y":8.44808842495339},{"x":-0.4762740179818516,"y":8.25879696504298},{"x":-0.0869522060179111,"y":8.33365415348487},{"x":-0.0806628048885385,"y":8.589969403272974},{"x":-0.41603407580165874,"y":8.869505960247778},{"x":-0.5808464739518867,"y":9.023340462542306},{"x":-0.41201593446329254,"y":8.169392826151604},{"x":0.2200456600098809,"y":7.233015080309538},{"x":-0.19324376692752704,"y":7.17755720640903},{"x":-0.0878781075126297,"y":7.109454224072083},{"x":-0.049393352508159294,"y":7.58494736181087},{"x":-0.9808089447863749,"y":8.418113585071847},{"x":-0.5290255568553752,"y":7.756670867773283},{"x":-0.1740469075952119,"y":8.376074947581255},{"x":-0.2447360861690806,"y":8.873798009014486},{"x":-0.5133590144268092,"y":8.081979389847984},{"x":-0.11934814925621118,"y":7.66806803591213},{"x":-0.3494862897896589,"y":7.351742073954862},{"x":-0.5440811208178529,"y":7.578193380382586},{"x":-0.36535789691403875,"y":8.31701546721922},{"x":-0.1747722133437492,"y":7.59828351542676},{"x":-0.0017230730654279602,"y":6.490630884013339},{"x":-0.35370485785957384,"y":7.605446588448025},{"x":-0.12717907668925305,"y":7.777711896452524},{"x":-0.2161438118497674,"y":7.756521013532204},{"x":-0.14411847897311492,"y":8.18342032838887},{"x":0.3140317107035578,"y":6.504547990271779},{"x":-0.19974305860563546,"y":7.667227077739112}]},{"name":"717929fb-ffb3-448c-b322-38740c36e068","values":[{"x":-1.5164173289697638,"y":9.48426441834646},{"x":-1.1414025974734578,"y":8.318243911045275},{"x":-1.2424263310569055,"y":9.85279535677303},{"x":-1.2094826627015975,"y":9.009573158716053},{"x":-1.3775109637664595,"y":9.367567510795448},{"x":-1.5957398404194199,"y":10.587584939856649},{"x":-1.0133376187943433,"y":7.224768533778256},{"x":-1.4198810321475972,"y":10.119947011951847},{"x":-1.4548862968490481,"y":9.260755043379593},{"x":-1.1665924831795784,"y":10.325566914504607},{"x":-0.7033519559992165,"y":9.050743524848825},{"x":-1.1116840033064743,"y":8.871575004062015},{"x":-1.0446159698587718,"y":9.422184732898886},{"x":-1.2425498251132605,"y":8.132642020704218},{"x":-1.2592929354647535,"y":8.440162399747544},{"x":-0.9771424924650943,"y":9.128620918376253},{"x":-1.0269377951174667,"y":9.146470381462718},{"x":-1.2366106917959154,"y":11.034635351627747},{"x":-2.0667341913473787,"y":10.698307544122851},{"x":-1.1478881646145938,"y":8.160116418937704},{"x":-1.11778624267876,"y":9.70946512265696},{"x":-1.036776184840089,"y":8.120146734712744},{"x":-1.7125487455320771,"y":10.621271108768445},{"x":-0.8222316530729211,"y":8.574409909466574},{"x":-1.0515118870000042,"y":9.563634222836049},{"x":-1.07232757606026,"y":10.004821033677114},{"x":-0.7254361267741852,"y":8.48595657366166},{"x":-0.7159310244646228,"y":8.538112576539172},{"x":-1.338816164193835,"y":9.09707479396762},{"x":-0.9705742760084889,"y":9.792657397387398},{"x":-1.3384829178791848,"y":10.071242457852863},{"x":-0.8978232929710559,"y":10.997348167345361},{"x":-1.3732920576672805,"y":9.113862751612851},{"x":-0.8060948272420563,"y":8.664655006530971},{"x":-1.2922125987304083,"y":8.678251020385812},{"x":-1.2816591036107314,"y":10.439702080365244},{"x":-1.1438928977086986,"y":9.300194968307977},{"x":-1.0010319395637715,"y":9.109332448547137},{"x":-0.6736242857549529,"y":8.411680798379098},{"x":-0.890654170604833,"y":9.48396522218997},{"x":-1.1930276558632769,"y":9.486725319413097},{"x":-0.7469361162060589,"y":9.36359571865197},{"x":-1.1414025974734578,"y":8.318243911045275},{"x":-1.2881492631179374,"y":9.7369787232998},{"x":-1.1894152965001499,"y":9.630785973365867},{"x":-0.9294811200850096,"y":9.226698137720465},{"x":-1.0365752901674339,"y":8.566555200174923},{"x":-0.8832197407186924,"y":9.026100877924717},{"x":-0.9962205947805433,"y":9.105659829613344},{"x":-0.9148767752047281,"y":8.490509199036998}]}],"marks":[{"type":"symbol","from":{"data":"2f77fd0c-427d-4930-815c-732c4b23071d"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"#ffffff"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}},{"type":"symbol","from":{"data":"89767225-3444-4b25-b615-2e24b4538039"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"#000000"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":20},"stroke":{"value":"transparent"}},"hover":{"size":{"value":60},"stroke":{"value":"white"}}}},{"type":"symbol","from":{"data":"bff5ed1a-4e85-43ba-bed3-0cdd04af33c2"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"#000000"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":20},"stroke":{"value":"transparent"}},"hover":{"size":{"value":60},"stroke":{"value":"white"}}}},{"type":"symbol","from":{"data":"717929fb-ffb3-448c-b322-38740c36e068"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"#000000"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":20},"stroke":{"value":"transparent"}},"hover":{"size":{"value":60},"stroke":{"value":"white"}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"2f77fd0c-427d-4930-815c-732c4b23071d\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"2f77fd0c-427d-4930-815c-732c4b23071d\", :field \"data.y\"}}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"2f77fd0c-427d-4930-815c-732c4b23071d\", :values ({:x 2.303442085013091, :y 5.912203441182305} {:x 1.9738310691095906, :y 5.572075790473948} {:x 2.0965326653811793, :y 5.446484551129698} {:x 1.8716807601609053, :y 5.436019138339218} {:x 2.329347940566786, :y 5.875065508266723} {:x 2.3255260176780155, :y 6.476990568381754} {:x 2.0715618359456913, :y 5.515428550310424} {:x 2.1494802012518353, :y 5.850423013063578} {:x 1.7764266672799258, :y 5.15851296447121} {:x 1.9919059461153845, :y 5.644581763010738} {:x 2.427279512430924, :y 6.264826797239334} {:x 2.021424173044276, :y 5.7515046520292685} {:x 1.9797238454484842, :y 5.480171123138309} {:x 2.049477957636921, :y 4.950641841217376} {:x 2.9177484137442278, :y 6.525285324956898} {:x 2.8254998850060615, :y 6.789604740791988} {:x 2.6090855838667237, :y 6.2717301448743505} {:x 2.2689662377753557, :y 5.928991376313162} {:x 2.3912620109732954, :y 6.647573945030632} {:x 2.3615432477916802, :y 6.09424297435861} {:x 2.1220328277730682, :y 6.253520516824439} {:x 2.2725784818073596, :y 6.073052106447873} {:x 2.4985750126325916, :y 5.369337853924519} {:x 1.8783669012533402, :y 6.040554867573636} {:x 1.8087545829100604, :y 5.905449908487463} {:x 1.860634354345428, :y 5.749822735683231} {:x 2.0096386203664887, :y 5.935313986700547} {:x 2.261135261796105, :y 6.038635280514736} {:x 2.2775362294593955, :y 5.949341374097886} {:x 1.883862990739648, :y 5.6004298687602505} {:x 1.8579571415689318, :y 5.637568069312068} {:x 2.1948609215292527, :y 6.184466172830855} {:x 2.622544909592193, :y 6.249720330971872} {:x 2.7991972216395675, :y 6.478522518066658} {:x 1.9919059461153845, :y 5.644581763010738} {:x 2.2531718137064356, :y 5.620520064976785} {:x 2.4886643861758544, :y 6.161355627312615} {:x 1.9919059461153845, :y 5.644581763010738} {:x 1.9018054827109898, :y 5.145176659134359} {:x 2.178063269582027, :y 5.925539746519157} {:x 2.3112730609923413, :y 5.802559536980732} {:x 1.5144898468807135, :y 4.971229452295} {:x 2.0107834603906047, :y 5.2211343507629575} {:x 1.9951758497749048, :y 6.0068686575022605} {:x 2.0435079240098535, :y 6.316291269322916} {:x 1.9107721535416642, :y 5.513746992149225} {:x 2.325129203482238, :y 6.128770145104604} {:x 1.9970597055038106, :y 5.422682923550968} {:x 2.3986964441007324, :y 6.189710063783754} {:x 2.165881039003284, :y 5.761129016098126} {:x -0.07002183871292034, :y 9.12033952102221} {:x -0.13421662328420436, :y 8.583796610327362} {:x -0.3293497653228632, :y 9.126662168208902} {:x -0.4584642674692738, :y 7.275784382326263} {:x -0.39447931735310404, :y 8.558313005230236} {:x -0.4833026247943437, :y 7.872487501246514} {:x -0.28456623418526783, :y 8.66607670445322} {:x 0.024182912400109058, :y 6.45349304164636} {:x -0.24245549047711124, :y 8.637832754509507} {:x -0.28984369873061344, :y 7.167822099959845} {:x -0.30696975772328405, :y 6.479324603598443} {:x -0.17344031976074992, :y 7.9783095144331115} {:x -0.2666101973806819, :y 7.5630258143644165} {:x -0.49073662783778693, :y 8.330351711383713} {:x 0.18061230008847162, :y 7.373513767160237} {:x 0.002409187325539408, :y 8.703064937268552} {:x -0.47185942019499216, :y 7.906904334684442} {:x -0.12222126183780924, :y 7.654001575954946} {:x -0.736272654725642, :y 8.05377441763697} {:x -0.18106175076794212, :y 7.3419679074538164} {:x -0.5932293764055291, :y 8.412521756552119} {:x -0.014520841950187213, :y 7.9163793250417775} {:x -0.8277821147258362, :y 8.44808842495339} {:x -0.4762740179818516, :y 8.25879696504298} {:x -0.0869522060179111, :y 8.33365415348487} {:x -0.0806628048885385, :y 8.589969403272974} {:x -0.41603407580165874, :y 8.869505960247778} {:x -0.5808464739518867, :y 9.023340462542306} {:x -0.41201593446329254, :y 8.169392826151604} {:x 0.2200456600098809, :y 7.233015080309538} {:x -0.19324376692752704, :y 7.17755720640903} {:x -0.0878781075126297, :y 7.109454224072083} {:x -0.049393352508159294, :y 7.58494736181087} {:x -0.9808089447863749, :y 8.418113585071847} {:x -0.5290255568553752, :y 7.756670867773283} {:x -0.1740469075952119, :y 8.376074947581255} {:x -0.2447360861690806, :y 8.873798009014486} {:x -0.5133590144268092, :y 8.081979389847984} {:x -0.11934814925621118, :y 7.66806803591213} {:x -0.3494862897896589, :y 7.351742073954862} {:x -0.5440811208178529, :y 7.578193380382586} {:x -0.36535789691403875, :y 8.31701546721922} {:x -0.1747722133437492, :y 7.59828351542676} {:x -0.0017230730654279602, :y 6.490630884013339} {:x -0.35370485785957384, :y 7.605446588448025} {:x -0.12717907668925305, :y 7.777711896452524} {:x -0.2161438118497674, :y 7.756521013532204} {:x -0.14411847897311492, :y 8.18342032838887} {:x 0.3140317107035578, :y 6.504547990271779} {:x -0.19974305860563546, :y 7.667227077739112} {:x -1.5164173289697638, :y 9.48426441834646} {:x -1.1414025974734578, :y 8.318243911045275} {:x -1.2424263310569055, :y 9.85279535677303} {:x -1.2094826627015975, :y 9.009573158716053} {:x -1.3775109637664595, :y 9.367567510795448} {:x -1.5957398404194199, :y 10.587584939856649} {:x -1.0133376187943433, :y 7.224768533778256} {:x -1.4198810321475972, :y 10.119947011951847} {:x -1.4548862968490481, :y 9.260755043379593} {:x -1.1665924831795784, :y 10.325566914504607} {:x -0.7033519559992165, :y 9.050743524848825} {:x -1.1116840033064743, :y 8.871575004062015} {:x -1.0446159698587718, :y 9.422184732898886} {:x -1.2425498251132605, :y 8.132642020704218} {:x -1.2592929354647535, :y 8.440162399747544} {:x -0.9771424924650943, :y 9.128620918376253} {:x -1.0269377951174667, :y 9.146470381462718} {:x -1.2366106917959154, :y 11.034635351627747} {:x -2.0667341913473787, :y 10.698307544122851} {:x -1.1478881646145938, :y 8.160116418937704} {:x -1.11778624267876, :y 9.70946512265696} {:x -1.036776184840089, :y 8.120146734712744} {:x -1.7125487455320771, :y 10.621271108768445} {:x -0.8222316530729211, :y 8.574409909466574} {:x -1.0515118870000042, :y 9.563634222836049} {:x -1.07232757606026, :y 10.004821033677114} {:x -0.7254361267741852, :y 8.48595657366166} {:x -0.7159310244646228, :y 8.538112576539172} {:x -1.338816164193835, :y 9.09707479396762} {:x -0.9705742760084889, :y 9.792657397387398} {:x -1.3384829178791848, :y 10.071242457852863} {:x -0.8978232929710559, :y 10.997348167345361} {:x -1.3732920576672805, :y 9.113862751612851} {:x -0.8060948272420563, :y 8.664655006530971} {:x -1.2922125987304083, :y 8.678251020385812} {:x -1.2816591036107314, :y 10.439702080365244} {:x -1.1438928977086986, :y 9.300194968307977} {:x -1.0010319395637715, :y 9.109332448547137} {:x -0.6736242857549529, :y 8.411680798379098} {:x -0.890654170604833, :y 9.48396522218997} {:x -1.1930276558632769, :y 9.486725319413097} {:x -0.7469361162060589, :y 9.36359571865197} {:x -1.1414025974734578, :y 8.318243911045275} {:x -1.2881492631179374, :y 9.7369787232998} {:x -1.1894152965001499, :y 9.630785973365867} {:x -0.9294811200850096, :y 9.226698137720465} {:x -1.0365752901674339, :y 8.566555200174923} {:x -0.8832197407186924, :y 9.026100877924717} {:x -0.9962205947805433, :y 9.105659829613344} {:x -0.9148767752047281, :y 8.490509199036998})} {:name \"89767225-3444-4b25-b615-2e24b4538039\", :values ({:x 2.303442085013091, :y 5.912203441182305} {:x 1.9738310691095906, :y 5.572075790473948} {:x 2.0965326653811793, :y 5.446484551129698} {:x 1.8716807601609053, :y 5.436019138339218} {:x 2.329347940566786, :y 5.875065508266723} {:x 2.3255260176780155, :y 6.476990568381754} {:x 2.0715618359456913, :y 5.515428550310424} {:x 2.1494802012518353, :y 5.850423013063578} {:x 1.7764266672799258, :y 5.15851296447121} {:x 1.9919059461153845, :y 5.644581763010738} {:x 2.427279512430924, :y 6.264826797239334} {:x 2.021424173044276, :y 5.7515046520292685} {:x 1.9797238454484842, :y 5.480171123138309} {:x 2.049477957636921, :y 4.950641841217376} {:x 2.9177484137442278, :y 6.525285324956898} {:x 2.8254998850060615, :y 6.789604740791988} {:x 2.6090855838667237, :y 6.2717301448743505} {:x 2.2689662377753557, :y 5.928991376313162} {:x 2.3912620109732954, :y 6.647573945030632} {:x 2.3615432477916802, :y 6.09424297435861} {:x 2.1220328277730682, :y 6.253520516824439} {:x 2.2725784818073596, :y 6.073052106447873} {:x 2.4985750126325916, :y 5.369337853924519} {:x 1.8783669012533402, :y 6.040554867573636} {:x 1.8087545829100604, :y 5.905449908487463} {:x 1.860634354345428, :y 5.749822735683231} {:x 2.0096386203664887, :y 5.935313986700547} {:x 2.261135261796105, :y 6.038635280514736} {:x 2.2775362294593955, :y 5.949341374097886} {:x 1.883862990739648, :y 5.6004298687602505} {:x 1.8579571415689318, :y 5.637568069312068} {:x 2.1948609215292527, :y 6.184466172830855} {:x 2.622544909592193, :y 6.249720330971872} {:x 2.7991972216395675, :y 6.478522518066658} {:x 1.9919059461153845, :y 5.644581763010738} {:x 2.2531718137064356, :y 5.620520064976785} {:x 2.4886643861758544, :y 6.161355627312615} {:x 1.9919059461153845, :y 5.644581763010738} {:x 1.9018054827109898, :y 5.145176659134359} {:x 2.178063269582027, :y 5.925539746519157} {:x 2.3112730609923413, :y 5.802559536980732} {:x 1.5144898468807135, :y 4.971229452295} {:x 2.0107834603906047, :y 5.2211343507629575} {:x 1.9951758497749048, :y 6.0068686575022605} {:x 2.0435079240098535, :y 6.316291269322916} {:x 1.9107721535416642, :y 5.513746992149225} {:x 2.325129203482238, :y 6.128770145104604} {:x 1.9970597055038106, :y 5.422682923550968} {:x 2.3986964441007324, :y 6.189710063783754} {:x 2.165881039003284, :y 5.761129016098126})} {:name \"bff5ed1a-4e85-43ba-bed3-0cdd04af33c2\", :values ({:x -0.07002183871292034, :y 9.12033952102221} {:x -0.13421662328420436, :y 8.583796610327362} {:x -0.3293497653228632, :y 9.126662168208902} {:x -0.4584642674692738, :y 7.275784382326263} {:x -0.39447931735310404, :y 8.558313005230236} {:x -0.4833026247943437, :y 7.872487501246514} {:x -0.28456623418526783, :y 8.66607670445322} {:x 0.024182912400109058, :y 6.45349304164636} {:x -0.24245549047711124, :y 8.637832754509507} {:x -0.28984369873061344, :y 7.167822099959845} {:x -0.30696975772328405, :y 6.479324603598443} {:x -0.17344031976074992, :y 7.9783095144331115} {:x -0.2666101973806819, :y 7.5630258143644165} {:x -0.49073662783778693, :y 8.330351711383713} {:x 0.18061230008847162, :y 7.373513767160237} {:x 0.002409187325539408, :y 8.703064937268552} {:x -0.47185942019499216, :y 7.906904334684442} {:x -0.12222126183780924, :y 7.654001575954946} {:x -0.736272654725642, :y 8.05377441763697} {:x -0.18106175076794212, :y 7.3419679074538164} {:x -0.5932293764055291, :y 8.412521756552119} {:x -0.014520841950187213, :y 7.9163793250417775} {:x -0.8277821147258362, :y 8.44808842495339} {:x -0.4762740179818516, :y 8.25879696504298} {:x -0.0869522060179111, :y 8.33365415348487} {:x -0.0806628048885385, :y 8.589969403272974} {:x -0.41603407580165874, :y 8.869505960247778} {:x -0.5808464739518867, :y 9.023340462542306} {:x -0.41201593446329254, :y 8.169392826151604} {:x 0.2200456600098809, :y 7.233015080309538} {:x -0.19324376692752704, :y 7.17755720640903} {:x -0.0878781075126297, :y 7.109454224072083} {:x -0.049393352508159294, :y 7.58494736181087} {:x -0.9808089447863749, :y 8.418113585071847} {:x -0.5290255568553752, :y 7.756670867773283} {:x -0.1740469075952119, :y 8.376074947581255} {:x -0.2447360861690806, :y 8.873798009014486} {:x -0.5133590144268092, :y 8.081979389847984} {:x -0.11934814925621118, :y 7.66806803591213} {:x -0.3494862897896589, :y 7.351742073954862} {:x -0.5440811208178529, :y 7.578193380382586} {:x -0.36535789691403875, :y 8.31701546721922} {:x -0.1747722133437492, :y 7.59828351542676} {:x -0.0017230730654279602, :y 6.490630884013339} {:x -0.35370485785957384, :y 7.605446588448025} {:x -0.12717907668925305, :y 7.777711896452524} {:x -0.2161438118497674, :y 7.756521013532204} {:x -0.14411847897311492, :y 8.18342032838887} {:x 0.3140317107035578, :y 6.504547990271779} {:x -0.19974305860563546, :y 7.667227077739112})} {:name \"717929fb-ffb3-448c-b322-38740c36e068\", :values ({:x -1.5164173289697638, :y 9.48426441834646} {:x -1.1414025974734578, :y 8.318243911045275} {:x -1.2424263310569055, :y 9.85279535677303} {:x -1.2094826627015975, :y 9.009573158716053} {:x -1.3775109637664595, :y 9.367567510795448} {:x -1.5957398404194199, :y 10.587584939856649} {:x -1.0133376187943433, :y 7.224768533778256} {:x -1.4198810321475972, :y 10.119947011951847} {:x -1.4548862968490481, :y 9.260755043379593} {:x -1.1665924831795784, :y 10.325566914504607} {:x -0.7033519559992165, :y 9.050743524848825} {:x -1.1116840033064743, :y 8.871575004062015} {:x -1.0446159698587718, :y 9.422184732898886} {:x -1.2425498251132605, :y 8.132642020704218} {:x -1.2592929354647535, :y 8.440162399747544} {:x -0.9771424924650943, :y 9.128620918376253} {:x -1.0269377951174667, :y 9.146470381462718} {:x -1.2366106917959154, :y 11.034635351627747} {:x -2.0667341913473787, :y 10.698307544122851} {:x -1.1478881646145938, :y 8.160116418937704} {:x -1.11778624267876, :y 9.70946512265696} {:x -1.036776184840089, :y 8.120146734712744} {:x -1.7125487455320771, :y 10.621271108768445} {:x -0.8222316530729211, :y 8.574409909466574} {:x -1.0515118870000042, :y 9.563634222836049} {:x -1.07232757606026, :y 10.004821033677114} {:x -0.7254361267741852, :y 8.48595657366166} {:x -0.7159310244646228, :y 8.538112576539172} {:x -1.338816164193835, :y 9.09707479396762} {:x -0.9705742760084889, :y 9.792657397387398} {:x -1.3384829178791848, :y 10.071242457852863} {:x -0.8978232929710559, :y 10.997348167345361} {:x -1.3732920576672805, :y 9.113862751612851} {:x -0.8060948272420563, :y 8.664655006530971} {:x -1.2922125987304083, :y 8.678251020385812} {:x -1.2816591036107314, :y 10.439702080365244} {:x -1.1438928977086986, :y 9.300194968307977} {:x -1.0010319395637715, :y 9.109332448547137} {:x -0.6736242857549529, :y 8.411680798379098} {:x -0.890654170604833, :y 9.48396522218997} {:x -1.1930276558632769, :y 9.486725319413097} {:x -0.7469361162060589, :y 9.36359571865197} {:x -1.1414025974734578, :y 8.318243911045275} {:x -1.2881492631179374, :y 9.7369787232998} {:x -1.1894152965001499, :y 9.630785973365867} {:x -0.9294811200850096, :y 9.226698137720465} {:x -1.0365752901674339, :y 8.566555200174923} {:x -0.8832197407186924, :y 9.026100877924717} {:x -0.9962205947805433, :y 9.105659829613344} {:x -0.9148767752047281, :y 8.490509199036998})}), :marks ({:type \"symbol\", :from {:data \"2f77fd0c-427d-4930-815c-732c4b23071d\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"#ffffff\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"89767225-3444-4b25-b615-2e24b4538039\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"#000000\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 20}, :stroke {:value \"transparent\"}}, :hover {:size {:value 60}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"bff5ed1a-4e85-43ba-bed3-0cdd04af33c2\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"#000000\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 20}, :stroke {:value \"transparent\"}}, :hover {:size {:value 60}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"717929fb-ffb3-448c-b322-38740c36e068\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"#000000\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 20}, :stroke {:value \"transparent\"}}, :hover {:size {:value 60}, :stroke {:value \"white\"}}}})}}"}
;; <=

;; **
;;; In such a situation, given just the measurement data @@\\{ \mathbf{x}_n \\}@@, we may wish to ask questions such as 
;;; 
;;; * "Are two different measurements @@\mathbf{x}_i@@, @@\mathbf{x}_j@@ of the same or different Iris variety?"
;;; * "In the 150 total different measurements, how many different species of flowers might there be?"
;;; 
;;; Notice that these are qualitatively different tasks than _label prediction_ that we may attempt using (say) logistic regression, and labeled training data.
;;; 
;;; 
;;; ### Defining the model
;;; 
;;; We will use a Bayesian mixture of Gaussians; the model we use here is as described in section 10.2 of [Bishop 2006].
;;; The mixture of Gaussians supposes that the data @@\\{ \mathbf{x}_n \\}@@ can be modeled by a mixture of @@K@@ different Gaussian distributions, each with a mean @@\boldsymbol{\mu}\_k@@ and a covariance matrix @@\boldsymbol{\Sigma}_k@@. Each data point @@\mathbf{x}\_n@@ is assigned to one of the clusters @@k = 1,\dots,K@@ via a latent class indicator variable @@z_n@@. The probability of any particular measurement being assigned to some class @@k@@ is given by a component-wise probability @@\pi_k@@.
;;; 
;;; <!---The parameters of the mixture of Gaussians are @@\boldsymbol{\pi}@@, a vector of length @@K@@ containing-->
;;; In a Bayesian mixture model, we place _prior distributions_ on the parameters of the model,
;;; 
;;; $$\boldsymbol{\pi} \sim \mathrm{Dirichlet}(\alpha)$$
;;; $$\boldsymbol{\Lambda}_k \sim \mathrm{Wishart}(\mathbf{\Lambda}_0, \nu)$$
;;; $$\boldsymbol{\mu}_k \big|\ \boldsymbol{\Lambda}_k \sim \mathrm{Normal}\hspace{-0.2em}\left(\mathbf{0}, (\beta \boldsymbol{\Lambda}_k)^{-1} \right)$$
;;; 
;;; and treat them as latent variables. Here we have parameratized the multivariate normal distribution with a *precision matrix* @@\boldsymbol{\Lambda} \equiv \boldsymbol{\Sigma}^{-1}@@, or inverse covariance matrix.
;;; The priors in this model are specifically chosen so as to be [conjugate to the likelihood](http://en.wikipedia.org/wiki/Conjugate_prior).
;;; 
;;; The likelihood of the data is defined as
;;; 
;;; $$z_n \big|\ \boldsymbol{\pi} \sim \mathrm{Categorical}(\boldsymbol{\pi})$$
;;; $$\mathbf{x}_n \big|\ z_n=k, \ \boldsymbol{\mu}_k, \ \boldsymbol{\Lambda}_k \sim \textrm{Normal}\hspace{-0.2em}\left(\ \boldsymbol{\mu}_k, \boldsymbol{\Lambda}_k^{-1} \right).$$
;;; 
;;; We can visualize the conditional independence structure as a graphical model:
;;; 
;;; <center>
;;; <p><img alt="Graphical model for Bayesian GMM" src="http://www.robots.ox.ac.uk/~fwood/teaching/AIMS_CDT_ML/homework/HW_3_sampling/graphical-models-crop.png" width="370px" style="padding-right: 20px" /></p>
;;; </center>
;;; 
;;; <!---We are going to perform inference using both MCMC and SMC methods.
;;; In both cases, we can take advantage of conjugacy to reduce the dimensionaliy of the
;;; space on which we need to sample.--->
;;; 
;;; We define this model as an Anglican program, conditioning on the Iris data, in the following cell.
;; **

;; @@
;; helper methods
(defn row-mean [data] (op// (reduce op/+ data) (m/row-count data)))
(defn invert
  ([W] (linalg/solve W))
  ([kappa W] (linalg/solve (op/* kappa W))))


;; bring required primitive procedures into our namespace
(use '[clojure.core.matrix :only [shape identity-matrix get-row]])


;; model definition
(with-primitive-procedures [row-mean invert shape identity-matrix get-row]
  (defquery gmm [data & [hyperparams]]
    (println "provided hyperparameters:" hyperparams)
    (let [[N D] (shape data)

          ;; there are many hyperparameters; we provide defaults
          K 		(:K 		hyperparams	10)
          alpha 	(:alpha		hyperparams	1.0)
          mu-0		(:mu-0		hyperparams (row-mean data))
          lambda-0 	(:lambda-0	hyperparams	(identity-matrix D))
          nu		(:nu		hyperparams	(inc D))
          kappa		(:kappa		hyperparams 1.0)

          ;; sample the latent variables.
          ;;
          ;; mu and sigma are per-cluster; ideally we would sample them lazily
          pi (sample (dirichlet (repeat K alpha)))
          lambda (into [] (map sample (repeat K (wishart nu lambda-0))))
          mu (into [] (map (fn [k] (sample (mvn mu-0 (invert kappa (get lambda k)))))
                           (range K)))
          sigma (into [] (map invert lambda))]
      ;; for each data point, sample z[n] and `observe`
      (loop [n 0
             z []]
        (if (= n N)
          (predict :z z)
          (let [row (get-row data n)
                k (sample (discrete pi))]
            (observe (mvn (get mu k) (get sigma k)) row)
            (recur (inc n) (conj z k))))))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gmm-iris-collapsed/gmm-collapsed</span>","value":"#'gmm-iris-collapsed/gmm-collapsed"}
;; <=

;; **
;;; Now, we draw some samples and plot them.
;; **

;; @@
(defn draw-samples [n-samples thin]
  "simple helper to draw samples and thin them; throw out 50% as burnin"
  (drop n-samples 
        (take (* 2 n-samples)
              (take-nth thin (doquery :pgibbs gmm-collapsed [X {:K 5}] :number-of-particles thin)))))

;; draw samples; thin
(def samples (draw-samples 10 10))

;; plot them, each; see how the samples evolve?
(map (fn [sample]
       (let [y-hat (:z (get-predicts sample))]
         (plot-pca X y-hat #(get colors %))))
     samples)

;; @@
;; ->
;;; provided hyperparameters: {:K 5}
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;gmm-iris-collapsed/samples</span>","value":"#'gmm-iris-collapsed/samples"}
;; <=

;; **
;;; Notice that the labels may switch around, as the sampler explores different possible generative explanations of the data.
;;; 
;;; Looking at a histogram over the class assignment variables, we see a tendency towards three similarly-sized clusters (which, in fact, roughly correspond to the "true" Iris species labels, even though we did not even look at the labels themselves in this model!).
;; **

;; @@
(map (fn [sample] (->> sample get-predicts :z plot/histogram)) samples)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"ec949dc0-68ac-4125-9c46-be81998f7d2f","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"ec949dc0-68ac-4125-9c46-be81998f7d2f","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"ec949dc0-68ac-4125-9c46-be81998f7d2f"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"ec949dc0-68ac-4125-9c46-be81998f7d2f","values":[{"x":0.0,"y":0},{"x":0.44444444444444453,"y":39.0},{"x":0.8888888888888891,"y":0.0},{"x":1.3333333333333335,"y":50.0},{"x":1.7777777777777781,"y":0.0},{"x":2.2222222222222228,"y":0.0},{"x":2.6666666666666674,"y":0.0},{"x":3.111111111111112,"y":56.0},{"x":3.5555555555555567,"y":0.0},{"x":4.000000000000001,"y":5.0},{"x":4.4444444444444455,"y":0}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"ec949dc0-68ac-4125-9c46-be81998f7d2f\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"ec949dc0-68ac-4125-9c46-be81998f7d2f\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"ec949dc0-68ac-4125-9c46-be81998f7d2f\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"ec949dc0-68ac-4125-9c46-be81998f7d2f\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 39.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 56.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 5.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"d98161e6-b50b-4d39-9c1f-81262c9d37d9","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"d98161e6-b50b-4d39-9c1f-81262c9d37d9","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"d98161e6-b50b-4d39-9c1f-81262c9d37d9"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"d98161e6-b50b-4d39-9c1f-81262c9d37d9","values":[{"x":0.0,"y":0},{"x":0.44444444444444453,"y":33.0},{"x":0.8888888888888891,"y":0.0},{"x":1.3333333333333335,"y":50.0},{"x":1.7777777777777781,"y":0.0},{"x":2.2222222222222228,"y":0.0},{"x":2.6666666666666674,"y":0.0},{"x":3.111111111111112,"y":62.0},{"x":3.5555555555555567,"y":0.0},{"x":4.000000000000001,"y":5.0},{"x":4.4444444444444455,"y":0}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"d98161e6-b50b-4d39-9c1f-81262c9d37d9\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"d98161e6-b50b-4d39-9c1f-81262c9d37d9\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"d98161e6-b50b-4d39-9c1f-81262c9d37d9\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"d98161e6-b50b-4d39-9c1f-81262c9d37d9\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 33.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 62.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 5.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"5ec126c5-1ce0-49a0-902a-eee35eb003fb","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"5ec126c5-1ce0-49a0-902a-eee35eb003fb","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"5ec126c5-1ce0-49a0-902a-eee35eb003fb"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"5ec126c5-1ce0-49a0-902a-eee35eb003fb","values":[{"x":0.0,"y":0},{"x":0.44444444444444453,"y":33.0},{"x":0.8888888888888891,"y":0.0},{"x":1.3333333333333335,"y":50.0},{"x":1.7777777777777781,"y":0.0},{"x":2.2222222222222228,"y":0.0},{"x":2.6666666666666674,"y":0.0},{"x":3.111111111111112,"y":62.0},{"x":3.5555555555555567,"y":0.0},{"x":4.000000000000001,"y":5.0},{"x":4.4444444444444455,"y":0}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"5ec126c5-1ce0-49a0-902a-eee35eb003fb\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"5ec126c5-1ce0-49a0-902a-eee35eb003fb\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"5ec126c5-1ce0-49a0-902a-eee35eb003fb\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"5ec126c5-1ce0-49a0-902a-eee35eb003fb\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 33.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 62.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 5.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65","values":[{"x":0.0,"y":0},{"x":0.44444444444444453,"y":87.0},{"x":0.8888888888888891,"y":0.0},{"x":1.3333333333333335,"y":50.0},{"x":1.7777777777777781,"y":0.0},{"x":2.2222222222222228,"y":0.0},{"x":2.6666666666666674,"y":0.0},{"x":3.111111111111112,"y":10.0},{"x":3.5555555555555567,"y":0.0},{"x":4.000000000000001,"y":3.0},{"x":4.4444444444444455,"y":0}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 87.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 10.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 3.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"25044a1d-cdee-4431-8dac-b21ad3010ccd","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"25044a1d-cdee-4431-8dac-b21ad3010ccd","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"25044a1d-cdee-4431-8dac-b21ad3010ccd"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"25044a1d-cdee-4431-8dac-b21ad3010ccd","values":[{"x":0.0,"y":0},{"x":0.44444444444444453,"y":61.0},{"x":0.8888888888888891,"y":0.0},{"x":1.3333333333333335,"y":50.0},{"x":1.7777777777777781,"y":0.0},{"x":2.2222222222222228,"y":0.0},{"x":2.6666666666666674,"y":0.0},{"x":3.111111111111112,"y":38.0},{"x":3.5555555555555567,"y":0.0},{"x":4.000000000000001,"y":1.0},{"x":4.4444444444444455,"y":0}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"25044a1d-cdee-4431-8dac-b21ad3010ccd\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"25044a1d-cdee-4431-8dac-b21ad3010ccd\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"25044a1d-cdee-4431-8dac-b21ad3010ccd\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"25044a1d-cdee-4431-8dac-b21ad3010ccd\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 61.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 38.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 1.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"714b3281-0368-45a4-9e14-caa849b3f28a","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"714b3281-0368-45a4-9e14-caa849b3f28a","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"714b3281-0368-45a4-9e14-caa849b3f28a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"714b3281-0368-45a4-9e14-caa849b3f28a","values":[{"x":0.0,"y":0},{"x":0.44444444444444453,"y":36.0},{"x":0.8888888888888891,"y":0.0},{"x":1.3333333333333335,"y":51.0},{"x":1.7777777777777781,"y":0.0},{"x":2.2222222222222228,"y":0.0},{"x":2.6666666666666674,"y":0.0},{"x":3.111111111111112,"y":10.0},{"x":3.5555555555555567,"y":0.0},{"x":4.000000000000001,"y":53.0},{"x":4.4444444444444455,"y":0}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"714b3281-0368-45a4-9e14-caa849b3f28a\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"714b3281-0368-45a4-9e14-caa849b3f28a\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"714b3281-0368-45a4-9e14-caa849b3f28a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"714b3281-0368-45a4-9e14-caa849b3f28a\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 36.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 51.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 10.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 53.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"e057e70c-b585-4329-b0a9-466587ebd19a","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"e057e70c-b585-4329-b0a9-466587ebd19a","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"e057e70c-b585-4329-b0a9-466587ebd19a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"e057e70c-b585-4329-b0a9-466587ebd19a","values":[{"x":0.0,"y":0},{"x":0.44444444444444453,"y":50.0},{"x":0.8888888888888891,"y":0.0},{"x":1.3333333333333335,"y":51.0},{"x":1.7777777777777781,"y":0.0},{"x":2.2222222222222228,"y":0.0},{"x":2.6666666666666674,"y":0.0},{"x":3.111111111111112,"y":15.0},{"x":3.5555555555555567,"y":0.0},{"x":4.000000000000001,"y":34.0},{"x":4.4444444444444455,"y":0}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"e057e70c-b585-4329-b0a9-466587ebd19a\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"e057e70c-b585-4329-b0a9-466587ebd19a\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"e057e70c-b585-4329-b0a9-466587ebd19a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"e057e70c-b585-4329-b0a9-466587ebd19a\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 50.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 51.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 15.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 34.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"9e9264d6-05a2-4f73-8d76-76e45737b89e","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"9e9264d6-05a2-4f73-8d76-76e45737b89e","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"9e9264d6-05a2-4f73-8d76-76e45737b89e"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"9e9264d6-05a2-4f73-8d76-76e45737b89e","values":[{"x":0.0,"y":0},{"x":0.44444444444444453,"y":82.0},{"x":0.8888888888888891,"y":0.0},{"x":1.3333333333333335,"y":50.0},{"x":1.7777777777777781,"y":0.0},{"x":2.2222222222222228,"y":0.0},{"x":2.6666666666666674,"y":0.0},{"x":3.111111111111112,"y":16.0},{"x":3.5555555555555567,"y":0.0},{"x":4.000000000000001,"y":2.0},{"x":4.4444444444444455,"y":0}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"9e9264d6-05a2-4f73-8d76-76e45737b89e\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"9e9264d6-05a2-4f73-8d76-76e45737b89e\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"9e9264d6-05a2-4f73-8d76-76e45737b89e\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"9e9264d6-05a2-4f73-8d76-76e45737b89e\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 82.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 16.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 2.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"81af6902-70df-42bf-ae50-7a74e23442a4","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"81af6902-70df-42bf-ae50-7a74e23442a4","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"81af6902-70df-42bf-ae50-7a74e23442a4"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"81af6902-70df-42bf-ae50-7a74e23442a4","values":[{"x":0.0,"y":0},{"x":0.44444444444444453,"y":73.0},{"x":0.8888888888888891,"y":0.0},{"x":1.3333333333333335,"y":50.0},{"x":1.7777777777777781,"y":0.0},{"x":2.2222222222222228,"y":0.0},{"x":2.6666666666666674,"y":0.0},{"x":3.111111111111112,"y":24.0},{"x":3.5555555555555567,"y":0.0},{"x":4.000000000000001,"y":3.0},{"x":4.4444444444444455,"y":0}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"81af6902-70df-42bf-ae50-7a74e23442a4\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"81af6902-70df-42bf-ae50-7a74e23442a4\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"81af6902-70df-42bf-ae50-7a74e23442a4\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"81af6902-70df-42bf-ae50-7a74e23442a4\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 73.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 24.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 3.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"},{"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a","values":[{"x":0.0,"y":0},{"x":0.44444444444444453,"y":31.0},{"x":0.8888888888888891,"y":0.0},{"x":1.3333333333333335,"y":50.0},{"x":1.7777777777777781,"y":0.0},{"x":2.2222222222222228,"y":0.0},{"x":2.6666666666666674,"y":0.0},{"x":3.111111111111112,"y":18.0},{"x":3.5555555555555567,"y":0.0},{"x":4.000000000000001,"y":51.0},{"x":4.4444444444444455,"y":0}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 31.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 18.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 51.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}],"value":"(#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"ec949dc0-68ac-4125-9c46-be81998f7d2f\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"ec949dc0-68ac-4125-9c46-be81998f7d2f\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"ec949dc0-68ac-4125-9c46-be81998f7d2f\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"ec949dc0-68ac-4125-9c46-be81998f7d2f\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 39.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 56.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 5.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}} #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"d98161e6-b50b-4d39-9c1f-81262c9d37d9\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"d98161e6-b50b-4d39-9c1f-81262c9d37d9\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"d98161e6-b50b-4d39-9c1f-81262c9d37d9\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"d98161e6-b50b-4d39-9c1f-81262c9d37d9\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 33.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 62.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 5.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}} #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"5ec126c5-1ce0-49a0-902a-eee35eb003fb\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"5ec126c5-1ce0-49a0-902a-eee35eb003fb\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"5ec126c5-1ce0-49a0-902a-eee35eb003fb\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"5ec126c5-1ce0-49a0-902a-eee35eb003fb\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 33.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 62.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 5.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}} #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"ff5a8ea7-bcd9-4ff1-8af8-2c9f67eb9d65\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 87.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 10.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 3.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}} #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"25044a1d-cdee-4431-8dac-b21ad3010ccd\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"25044a1d-cdee-4431-8dac-b21ad3010ccd\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"25044a1d-cdee-4431-8dac-b21ad3010ccd\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"25044a1d-cdee-4431-8dac-b21ad3010ccd\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 61.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 38.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 1.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}} #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"714b3281-0368-45a4-9e14-caa849b3f28a\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"714b3281-0368-45a4-9e14-caa849b3f28a\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"714b3281-0368-45a4-9e14-caa849b3f28a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"714b3281-0368-45a4-9e14-caa849b3f28a\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 36.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 51.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 10.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 53.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}} #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"e057e70c-b585-4329-b0a9-466587ebd19a\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"e057e70c-b585-4329-b0a9-466587ebd19a\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"e057e70c-b585-4329-b0a9-466587ebd19a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"e057e70c-b585-4329-b0a9-466587ebd19a\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 50.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 51.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 15.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 34.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}} #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"9e9264d6-05a2-4f73-8d76-76e45737b89e\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"9e9264d6-05a2-4f73-8d76-76e45737b89e\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"9e9264d6-05a2-4f73-8d76-76e45737b89e\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"9e9264d6-05a2-4f73-8d76-76e45737b89e\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 82.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 16.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 2.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}} #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"81af6902-70df-42bf-ae50-7a74e23442a4\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"81af6902-70df-42bf-ae50-7a74e23442a4\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"81af6902-70df-42bf-ae50-7a74e23442a4\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"81af6902-70df-42bf-ae50-7a74e23442a4\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 73.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 24.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 3.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}} #gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"a4f8d5b2-d38f-4fe3-acf8-ec2317dc486a\", :values ({:x 0.0, :y 0} {:x 0.44444444444444453, :y 31.0} {:x 0.8888888888888891, :y 0.0} {:x 1.3333333333333335, :y 50.0} {:x 1.7777777777777781, :y 0.0} {:x 2.2222222222222228, :y 0.0} {:x 2.6666666666666674, :y 0.0} {:x 3.111111111111112, :y 18.0} {:x 3.5555555555555567, :y 0.0} {:x 4.000000000000001, :y 51.0} {:x 4.4444444444444455, :y 0})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}})"}
;; <=

;; **
;;; What if we want to check whether the first entry @@\mathbf{x}_1@@ is the same type of flower as @@\mathbf{x}_2@@?
;;; 
;;; We can compare our prediction to the ground truth by looking at the actual species labels in @@y_1, y_2@@.
;; **

;; @@
(defn are-x1-x2-the-same [z] (if (= (get z 1) (get z 2)) 1.0 0.0))

(defn check-same-cluster-pct [test-fn samples]
  (* 100
     (/ (reduce + (map #(test-fn (:z (get-predicts %))) samples))
        (count samples))))


(println "percent of samples in which x1 and x2 are in the same cluster:" 
         (check-same-cluster-pct are-x1-x2-the-same samples))

(println "\ntrue labels for x1, x2:" (get y 1) (get y 2))
;; @@
;; ->
;;; percent of samples in which x1 and x2 are in the same cluster: 100.0
;;; 
;;; true labels for x1, x2: :Iris-setosa :Iris-setosa
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; We can also try comparing two flowers we know to be in different classes, e.g. @@\mathbf{x}\_1@@ and @@\mathbf{x}_{101}@@, and see they are much less often included in the same cluster.
;; **

;; @@
(defn are-x1-x101-the-same [z] (if (= (get z 1) (get z 101)) 1.0 0.0))

(println "percent of samples in which x1 and x101 are in the same cluster:" 
         (check-same-cluster-pct are-x1-x101-the-same samples))

(println "\ntrue labels for x1, x101:" (get y 1) (get y 101))
;; @@
;; ->
;;; percent of samples in which x1 and x101 are in the same cluster: 0.0
;;; 
;;; true labels for x1, x101: :Iris-setosa :Iris-virginica
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=
